
/* cytoscape.min.js */

/**
 * This file is part of cytoscape.js 2.0.0beta2-github-snapshot-2012.10.23-16.11.13.
 * 
 * Cytoscape.js is free software: you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as published by the Free
 * Software Foundation, either version 3 of the License, or (at your option) any
 * later version.
 * 
 * Cytoscape.js is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more
 * details.
 * 
 * You should have received a copy of the GNU Lesser General Public License along with
 * cytoscape.js. If not, see <http://www.gnu.org/licenses/>.
 */
 
var cytoscape;(function(){var a=cytoscape=function(){return cytoscape.init.apply(cytoscape,arguments)};a.init=function(b){if(b===undefined){b={}}if(a.is.plainObject(b)){return new a.Core(b)}else{if(a.is.string(b)){return a.extension.apply(a.extension,arguments)}}};a.fn={};if(typeof exports!=="undefined"){exports=module.exports=cytoscape}})();(function(a){a.is={string:function(b){return b!=null&&typeof b==typeof""},fn:function(b){return b!=null&&typeof b===typeof function(){}},array:function(b){return b!=null&&b instanceof Array
},plainObject:function(b){return b!=null&&typeof b===typeof{}&&!a.is.array(b)&&b.constructor===Object},number:function(b){return b!=null&&typeof b===typeof 1&&!isNaN(b)},integer:function(b){return a.is.number(b)&&Math.floor(b)===b},color:function(b){return b!=null&&typeof b===typeof""&&$.Color(b).toString()!==""},bool:function(b){return b!=null&&typeof b===typeof true},elementOrCollection:function(b){return a.is.element(b)||a.is.collection(b)},element:function(b){return b instanceof a.Element&&b._private.single
},collection:function(b){return b instanceof a.Collection&&!b._private.single},core:function(b){return b instanceof a.Core},style:function(b){return b instanceof a.Style},stylesheet:function(b){return b instanceof a.Stylesheet},event:function(b){return b instanceof a.Event},emptyString:function(b){if(!b){return true}else{if(a.is.string(b)){if(b===""||b.match(/^\s+$/)){return true}}}return false},nonemptyString:function(b){if(b&&a.is.string(b)&&b!==""&&!b.match(/^\s+$/)){return true}return false},domElement:function(b){if(typeof HTMLElement==="undefined"){return false
}else{return b instanceof HTMLElement}}}})(cytoscape);(function(a){a.util={extend:function(){var l,d,b,c,h,j,g=arguments[0]||{},f=1,e=arguments.length,k=false;if(typeof g==="boolean"){k=g;g=arguments[1]||{};f=2}if(typeof g!=="object"&&!a.is.fn(g)){g={}}if(e===f){g=this;--f}for(;f<e;f++){if((l=arguments[f])!=null){for(d in l){b=g[d];c=l[d];if(g===c){continue}if(k&&c&&(a.is.plainObject(c)||(h=a.is.array(c)))){if(h){h=false;j=b&&a.is.array(b)?b:[]}else{j=b&&a.is.plainObject(b)?b:{}}g[d]=a.util.extend(k,j,c)
}else{if(c!==undefined){g[d]=c}}}}}return g},error:function(b){if(console){if(console.error){console.error(b)}else{if(console.log){console.log(b)}else{throw b}}}else{throw b}},clone:function(d){var c={};for(var b in d){if(d.hasOwnProperty(b)){c[b]=d[b]}}return c},copy:function(b){if(b==null){return b}if(a.is.array(b)){return b.slice()}else{if(a.is.plainObject(b)){return a.util.clone(b)}else{return b}}},mapEmpty:function(d){var c=true;if(d!=null){for(var b in d){c=false;break}}return c},pushMap:function(b){var c=a.util.getMap(b);
if(c==null){a.util.setMap($.extend({},b,{value:[b.value]}))}else{c.push(b.value)}},setMap:function(c){var g=c.map;var e;var f=c.keys;var b=f.length;for(var d=0;d<b;d++){var e=f[d];if(a.is.plainObject(e)){a.util.error("Tried to set map with object key")}if(d<f.length-1){if(g[e]==null){g[e]={}}g=g[e]}else{g[e]=c.value}}},getMap:function(c){var g=c.map;var f=c.keys;var b=f.length;for(var e=0;e<b;e++){var d=f[e];if(a.is.plainObject(d)){a.util.error("Tried to get map with object key")}g=g[d];if(g==null){return g
}}return g},deleteMap:function(k){var e=k.map;var j=k.keys;var d=j.length;var c=k.keepChildren;for(var f=0;f<d;f++){var g=j[f];if(a.is.plainObject(g)){a.util.error("Tried to delete map with object key")}var h=f===k.keys.length-1;if(h){if(c){for(var b in e){if(!c[b]){delete e[b]}}}else{delete e[g]}}else{e=e[g]}}},capitalize:function(b){if(a.is.emptyString(b)){return b}return b.charAt(0).toUpperCase()+b.substring(1)},camel2dash:function(h){var e=[];for(var f=0;f<h.length;f++){var g=h[f];var b=g.toLowerCase();
var d=g!==b;if(d){e.push("-");e.push(b)}else{e.push(g)}}var c=e.length===h.length;if(c){return h}return e.join("")},dash2camel:function(f){var b=[];var e=false;for(var c=0;c<f.length;c++){var d=f[c];var g=d==="-";if(g){e=true}else{if(e){b.push(d.toUpperCase())}else{b.push(d)}e=false}}return b.join("")},trim:function(d){var c,b;for(c=0;c<d.length&&d[c]===" ";c++){}for(b=d.length-1;b>c&&d[b]===" ";b--){}return d.substring(c,b+1)},hex2tuple:function(h){if(!(h.length===4||h.length===7)||h[0]!=="#"){return
}var f=h.length===4;var e,d,c;var i=16;if(f){e=parseInt(h[1]+h[1],i);d=parseInt(h[2]+h[2],i);c=parseInt(h[3]+h[3],i)}else{e=parseInt(h[1]+h[2],i);d=parseInt(h[3]+h[4],i);c=parseInt(h[5]+h[6],i)}return[e,d,c]},hsl2tuple:function(w){var t;var k=a.util.regex.number;var n,z,j,v,c,o,u;var i=new RegExp("^hsl[a]?\\(("+k+")\\s*,\\s*("+k+"[%])\\s*,\\s*("+k+"[%])(?:\\s*,\\s*("+k+"))?\\)$").exec(w);if(i){n=parseInt(i[1]);if(n<0){n=(360-(-1*n%360))%360}else{if(n>360){n=n%360}}n/=360;z=parseFloat(i[2]);if(z<0||z>100){return
}z=z/100;j=parseFloat(i[3]);if(j<0||j>100){return}j=j/100;v=i[4];if(v!==undefined){v=parseFloat(v);if(v<0||v>1){return}}if(z===0){c=o=u=Math.round(j*255)}else{function f(h,g,b){if(b<0){b+=1}if(b>1){b-=1}if(b<1/6){return h+(g-h)*6*b}if(b<1/2){return g}if(b<2/3){return h+(g-h)*(2/3-b)*6}return Math.round(255*h)}var d=j<0.5?j*(1+z):j+z-j*z;var e=2*j-d;c=f(e,d,n+1/3);o=f(e,d,n);u=f(e,d,n-1/3)}t=[c,o,u,v]}return t},rgb2tuple:function(k){var h;var d=a.util.regex.number;var b=new RegExp("^rgb[a]?\\(("+d+"[%]?)\\s*,\\s*("+d+"[%]?)\\s*,\\s*("+d+"[%]?)(?:\\s*,\\s*("+d+"))?\\)$").exec(k);
if(b){h=[];var l=[];for(var e=1;e<=3;e++){var g=b[e];if(g[g.length-1]==="%"){l[e]=true}g=parseFloat(g);if(l[e]){g=g/100*255}if(g<0||g>255){return}h.push(Math.floor(g))}var f=l[1]||l[2]||l[3];var j=l[1]&&l[2]&&l[3];if(f&&!j){return}var c=b[4];if(c!==undefined){c=parseFloat(c);if(c<0||c>1){return}h.push(c)}}return h},colorname2tuple:function(b){return a.util.colors[b.toLowerCase()]},color2tuple:function(b){return a.util.colorname2tuple(b)||a.util.hex2tuple(b)||a.util.rgb2tuple(b)||a.util.hsl2tuple(b)
},tuple2hex:function(d){var f=d[0];var e=d[1];var c=d[2];function h(b){var g=b.toString(16);if(g.length===1){g="0"+g}return g}return"#"+h(f)+h(e)+h(c)},regex:{number:"(?:\\d*\\.\\d+|\\d+|\\d*\\.\\d+[eE]\\d+)"},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}
})(cytoscape);(function(b){b.math={};b.math.boxInBezierVicinity=function(n,j,u,k,p,i,o,h,l,f,m){var v=Math.min(n,u)-m;var s=Math.min(j,k)-m;var t=Math.max(n,u)+m;var r=Math.max(j,k)+m;if(p>=v&&p<=t&&i>=s&&i<=r){return 2}else{if(l>=v&&l<=t&&f>=s&&f<=r){return 2}else{if(o>=v&&o<=t&&h>=s&&h<=r){return 1}}}var g=Math.min(p,o,l);var e=Math.min(i,h,f);var d=Math.max(p,o,l);var c=Math.max(i,h,f);if(g>t||d<v||e>r||c<s){return 0}return 1};b.math.checkStraightEdgeCrossesBox=function(r,k,A,n,t,g,s,d,p){var B=Math.min(r,A)-p;
var w=Math.min(k,n)-p;var z=Math.max(r,A)+p;var v=Math.max(k,n)+p;var h=s-t;var m=t;var u;var e=d-g;var l=g;var o;if(Math.abs(h)<0.0001){return(t>=B&&t<=z&&Math.min(g,d)<=w&&Math.max(g,d)>=v)}var c=(B-m)/h;if(c>0&&c<=1){u=e*c+l;if(u>=w&&u<=v){return true}}var j=(z-m)/h;if(j>0&&j<=1){u=e*j+l;if(u>=w&&u<=v){return true}}var f=(w-l)/e;if(f>0&&f<=1){o=h*f+m;if(o>=B&&o<=z){return true}}var i=(v-l)/e;if(i>0&&i<=1){o=h*i+m;if(o>=B&&o<=z){return true}}return false};b.math.checkBezierCrossesBox=function(w,h,L,A,p,U,l,R,j,O,d){var s=Math.min(w,L)-d;
var o=Math.min(h,A)-d;var T=Math.max(w,L)+d;var Q=Math.max(h,A)+d;if(p>=s&&p<=T&&U>=o&&U<=Q){return true}else{if(j>=s&&j<=T&&O>=o&&O<=Q){return true}}var v=p-2*l+j;var g=-2*p+2*l;var H=p;var B=[];if(Math.abs(v)<0.0001){var M=(s-p)/g;var z=(T-p)/g;B.push(M,z)}else{var E=g*g-4*v*(H-s);var t,r;if(E>0){var F=Math.sqrt(E);t=(-g+F)/(2*v);r=(-g-F)/(2*v);B.push(t,r)}var D=g*g-4*v*(H-T);var n,k;if(D>0){var F=Math.sqrt(D);n=(-g+F)/(2*v);k=(-g-F)/(2*v);B.push(n,k)}}B.sort(function(W,V){return W-V});var u=U-2*R+O;
var e=-2*U+2*R;var G=U;var K=[];if(Math.abs(u)<0.0001){var f=(o-U)/e;var I=(Q-U)/e;K.push(f,I)}else{var m=e*e-4*u*(G-o);var c,S;if(m>0){var F=Math.sqrt(m);c=(-e+F)/(2*u);S=(-e-F)/(2*u);K.push(c,S)}var i=e*e-4*u*(G-Q);var P,N;if(i>0){var F=Math.sqrt(i);P=(-e+F)/(2*u);N=(-e-F)/(2*u);K.push(P,N)}}K.sort(function(W,V){return W-V});for(var C=0;C<B.length;C+=2){for(var J=1;J<K.length;J+=2){if(B[C]<K[J]&&K[J]>=0&&B[C]<=1&&B[C+1]>K[J-1]&&K[J-1]<=1&&B[C+1]>=0){return true}}}return false};b.math.inBezierVicinity=function(i,h,t,e,s,d,r,c,A){var k=0.25*t+0.5*s+0.25*r;
var j=0.25*e+0.5*d+0.25*c;var n,m,w,u;var g,f,l;var z=function(C,I,D,B,H,G,E,F){g=(G-B)*(C-D)+(D-H)*(I-B);f=g*g;sideSquared=(G-B)*(G-B)+(D-H)*(D-H);if(F){if(g>0){return false}}else{if(g<0){return false}}return(f/sideSquared>E)};var p=(k+s)/2;var o=(j+d)/2;var v=true;if(z(p,o,t,e,s,d,0,v)){v=!v}return(!z(i,h,t,e,s,d,A,v)&&!z(i,h,s,d,r,c,A,v)&&!z(i,h,r,c,t,e,A,v))};b.math.solveCubic=function(n,m,l,k,u){m/=n;l/=n;k/=n;var f,g,e,i,p,o,h,j;g=(3*l-(m*m))/9;e=-(27*k)+m*(9*l-2*(m*m));e/=54;f=g*g*g+e*e;u[1]=0;
h=(m/3);if(f>0){p=e+Math.sqrt(f);p=((p<0)?-Math.pow(-p,(1/3)):Math.pow(p,(1/3)));o=e-Math.sqrt(f);o=((o<0)?-Math.pow(-o,(1/3)):Math.pow(o,(1/3)));u[0]=-h+p+o;h+=(p+o)/2;u[4]=u[2]=-h;h=Math.sqrt(3)*(-o+p)/2;u[3]=h;u[5]=-h;return}u[5]=u[3]=0;if(f==0){j=((e<0)?-Math.pow(-e,(1/3)):Math.pow(e,(1/3)));u[0]=-h+2*j;u[4]=u[2]=-(j+h);return}g=-g;i=g*g*g;i=Math.acos(e/Math.sqrt(i));j=2*Math.sqrt(g);u[0]=-h+j*Math.cos(i/3);u[2]=-h+j*Math.cos((i+2*Math.PI)/3);u[4]=-h+j*Math.cos((i+4*Math.PI)/3);return};b.math.sqDistanceToQuadraticBezier=function(p,o,v,j,u,h,t,g){var D=1*v*v-4*v*u+2*v*t+4*u*u-4*u*t+t*t+j*j-4*j*h+2*j*g+4*h*h-4*h*g+g*g;
var C=1*9*v*u-3*v*v-3*v*t-6*u*u+3*u*t+9*j*h-3*j*j-3*j*g-6*h*h+3*h*g;var A=1*3*v*v-6*v*u+v*t-v*p+2*u*u+2*u*p-t*p+3*j*j-6*j*h+j*g-j*o+2*h*h+2*h*o-g*o;var z=1*v*u-v*v+v*p-u*p+j*h-j*j+j*o-h*o;a("coefficients: "+D/D+", "+C/D+", "+A/D+", "+z/D);var k=[];this.solveCubic(D,C,A,z,k);var e=1e-7;var B=[];for(var l=0;l<6;l+=2){if(Math.abs(k[l+1])<e&&k[l]>=0&&k[l]<=1){B.push(k[l])}}B.push(1);B.push(0);var f=-1;var w;var n,m,r;for(var s=0;s<B.length;s++){n=Math.pow(1-B[s],2)*v+2*(1-B[s])*B[s]*u+B[s]*B[s]*t;m=Math.pow(1-B[s],2)*j+2*(1-B[s])*B[s]*h+B[s]*B[s]*g;
r=Math.pow(n-p,2)+Math.pow(m-o,2);a("distance for param "+B[s]+": "+Math.sqrt(r));if(f>=0){if(r<f){f=r;w=B[s]}}else{f=r;w=B[s]}}a("given: ( "+p+", "+o+"), ( "+v+", "+j+"), ( "+u+", "+h+"), ( "+t+", "+g+")");a("roots: "+k);a("params: "+B);a("closest param: "+w);return f};var a=function(c){if(false){console.log(c)}}})(cytoscape);(function(a){a.instances=[];a.instanceCounter=0;a.lastInstanceTime;a.registerInstance=function(b,f){var h;if(a.is.core(b)){h=b}else{if(a.is.domElement(b)){f=b}}var e=+new Date;
var d;if(!a.lastInstanceTime||a.lastInstanceTime===e){a.instanceCounter=0}else{++a.instanceCounter}a.lastInstanceTime=e;d=a.instanceCounter;var g="cy-"+e+"-"+d;var c={id:g,cy:h,domElement:f,readies:[]};a.instances.push(c);a.instances[g]=c;return c};a.getRegistrationForInstance=function(b,e){var g;if(a.is.core(b)){if(b.registered()){g=b}}else{if(a.is.domElement(b)){e=b}}if(a.is.core(g)){var f=g.instanceId();return a.instances[f]}else{if(a.is.domElement(e)){for(var c=a.instances.length-1;c>=0;c--){var d=a.instances[c];
if(d.domElement===e){return d}}}}}})(cytoscape);(function(c){var f={};c.extensions=f;var d={};c.modules=d;function b(j,i,k){var h={};h[i]=k;switch(j){case"core":case"collection":c.fn[j](h)}return c.util.setMap({map:f,keys:[j,i],value:k})}function g(i,h){return c.util.getMap({map:f,keys:[i,h]})}function e(k,i,j,h,l){return c.util.setMap({map:d,keys:[k,i,j,h],value:l})}function a(k,i,j,h){return c.util.getMap({map:d,keys:[k,i,j,h]})}c.extension=function(){if(arguments.length==2){return g.apply(this,arguments)
}else{if(arguments.length==3){return b.apply(this,arguments)}else{if(arguments.length==4){return a.apply(this,arguments)}else{if(arguments.length==5){return e.apply(this,arguments)}else{$.error("Invalid extension access syntax")}}}}}})(cytoscape);(function(b,a){if(!b){return}b.fn.cytoscape=function(h){var k=b(this);if(h==="get"){var g=a.getRegistrationForInstance(k[0]);return g.cy}else{if(a.is.fn(h)){var f=h;var c=k[0];var g=a.getRegistrationForInstance(c);if(!g){g=a.registerInstance(c)}if(g&&g.cy&&g.cy.ready()){g.cy.trigger("ready",[],f)
}else{g.readies.push(f)}}else{if(a.is.plainObject(h)){return k.each(function(){var i=b.extend({},h,{container:b(this)[0]});cytoscape(i)})}else{var c=k[0];var j=[];var d=[];for(var e=1;e<arguments.length;e++){d[e-1]=arguments[e]}k.each(function(){var l=a.getRegistrationForInstance(c);var n=l.cy;var m=h;if(n&&a.is.fn(n[m])){var i=n[m].apply(n,d);j.push(i)}});if(j.length===1){j=j[0]}else{if(j.length==0){j=b(this)}}return j}}}};b.cytoscape=cytoscape;if(b.fn.cy==null&&b.cy==null){b.fn.cy=b.fn.cytoscape;
b.cy=b.cytoscape}})(typeof jQuery!=="undefined"?jQuery:null,cytoscape);(function(a){a.Event=function(e,d){if(!(this instanceof a.Event)){return new a.Event(e,d)}if(e&&e.type){this.originalEvent=e;this.type=e.type;this.isDefaultPrevented=(e.defaultPrevented||e.returnValue===false||e.getPreventDefault&&e.getPreventDefault())?c:b}else{this.type=e}if(d){a.util.extend(this,d)}this.timeStamp=e&&e.timeStamp||+new Date};function b(){return false}function c(){return true}a.Event.prototype={preventDefault:function(){this.isDefaultPrevented=c;
var d=this.originalEvent;if(!d){return}if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=c;var d=this.originalEvent;if(!d){return}if(d.stopPropagation){d.stopPropagation()}d.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=c;this.stopPropagation()},isDefaultPrevented:b,isPropagationStopped:b,isImmediatePropagationStopped:b}})(cytoscape);(function(a){a.define={data:function(c){var b={field:"data",bindingEvent:"data",allowBinding:false,allowSetting:false,allowGetting:false,settingEvent:"data",settingTriggersEvent:false,triggerFnName:"trigger",immutableKeys:{},updateMappers:false};
c=a.util.extend({},b,c);return function(e,s){var g=c;var z=this;var f=z.length!==undefined;var t=f?z:[z];var w=f?z[0]:z;if(a.is.string(e)){if(g.allowGetting&&s===undefined){var o;if(w){o=w._private[g.field][e]}return o}else{if(g.allowSetting&&s!==undefined){var d=!g.immutableKeys[e];if(d){for(var n=0,h=t.length;n<h;n++){t[n]._private[g.field][e]=s}if(g.updateMappers){z.updateMappers()}if(g.settingTriggersEvent){z[g.triggerFnName](g.settingEvent)}}}}}else{if(g.allowSetting&&a.is.plainObject(e)){var m=e;
var j,u;for(j in m){u=m[j];var d=!g.immutableKeys[j];if(d){for(var n=0,h=t.length;n<h;n++){t[n]._private[g.field][j]=u}}}if(g.updateMappers){z.updateMappers()}if(g.settingTriggersEvent){z[g.triggerFnName](g.settingEvent)}}else{if(g.allowBinding&&a.is.fn(e)){var r=e;z.bind(g.bindingEvent,r)}else{if(g.allowGetting&&e===undefined){var o;if(w){o=w._private[g.field]}return o}}}}return z}},removeData:function(c){var b={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:false,immutableKeys:{}};
c=a.util.extend({},b,c);return function(o){var g=c;var v=this;var f=v.length!==undefined;var r=f?v:[v];var t=f?v[0]:v;if(a.is.string(o)){var u=o.split(/\s+/);var j=u.length;for(var k=0;k<j;k++){var s=u[k];if(a.is.emptyString(s)){continue}var e=!g.immutableKeys[s];if(e){for(var n=0,h=r.length;n<h;n++){delete r[n]._private[g.field][s]}}}if(g.triggerEvent){v[g.triggerFnName](g.event)}}else{if(o===undefined){for(var n=0,h=r.length;n<h;n++){var m=r[n]._private[g.field];for(var s in m){var d=!g.immutableKeys[s];
if(d){delete m[s]}}}if(g.triggerEvent){v[g.triggerFnName](g.event)}}}return v}},event:{regex:/(\w+)(\.\w+)?/,optionalTypeRegex:/(\w+)?(\.\w+)?/,props:"altKey bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase metaKey offsetX offsetY originalTarget pageX pageY prevValue relatedTarget screenX screenY shiftKey target view which".split(/\s+/),aliases:"mousedown mouseup click mouseover mouseout mousemove touchstart touchmove touchend grab drag free".split(/\s+/),aliasesOn:function(e){var b=a.define.event.aliases;
for(var d=0;d<b.length;d++){var c=b[d];e[c]=function(f,g){if(a.is.fn(g)){this.on(c,f,g)}else{if(a.is.fn(f)){g=f;this.on(c,g)}else{this.trigger(c)}}return this}}},falseCallback:function(){return false}},on:function(c){var b={unbindSelfOnTrigger:false,unbindAllBindersOnTrigger:false};c=a.util.extend({},b,c);return function(e,u,B,k){var r=this;var d=r.length!==undefined;var f=d?r:[r];var z=d?r[0]:r;var w=a.is.string(e);var s=c;if(a.is.plainObject(u)){k=B;B=u;u=undefined}else{if(a.is.fn(u)||u===false){k=u;
B=undefined;u=undefined}}if(a.is.fn(B)||B===false){k=B;B=undefined}if(!(a.is.fn(k)||k===false)&&w){return r}if(w){var A={};A[e]=k;e=A}for(var l in e){k=e[l];if(k===false){k=a.define.event.falseCallback}if(!a.is.fn(k)){continue}l=l.split(/\s+/);for(var v=0;v<l.length;v++){var o=l[v];if(a.is.emptyString(o)){continue}var m=o.match(a.define.event.regex);if(m){var g=m[1];var n=m[2]?m[2]:undefined;var h={callback:k,data:B,delegated:u?true:false,selector:u,type:g,namespace:n,unbindSelfOnTrigger:s.unbindSelfOnTrigger,unbindAllBindersOnTrigger:s.unbindAllBindersOnTrigger,binders:f};
for(var t=0;t<f.length;t++){f[t]._private.listeners.push(h)}}}}return r}},off:function(c){var b={};c=a.util.extend({},b,c);return function(e,B,l){var t=this;var d=t.length!==undefined;var f=d?t:[t];var F=d?t[0]:t;var E=a.is.string(e);var u=c;if(arguments.length===0){for(var C=0;C<f.length;C++){f[C]._private.listeners=[]}return t}if(a.is.fn(B)||B===false){l=B;B=undefined}if(E){var H={};H[e]=l;e=H}for(var m in e){l=e[m];if(l===false){l=a.define.event.falseCallback}m=m.split(/\s+/);for(var D=0;D<m.length;
D++){var s=m[D];if(a.is.emptyString(s)){continue}var n=s.match(a.define.event.optionalTypeRegex);if(n){var g=n[1]?n[1]:undefined;var r=n[2]?n[2]:undefined;for(var C=0;C<f.length;C++){var v=f[C]._private.listeners;for(var A=0;A<v.length;A++){var k=v[A];var o=!r||r===k.namespace;var w=!g||k.type===g;var z=!l||l===k.callback;var G=o&&w&&z;if(G){v.splice(A,1);A--}}}}}}return t}},trigger:function(c){var b={};c=a.util.extend({},b,c);return function(F,g,A){var o=this;var v=o.length!==undefined;var B=v?o:[o];
var G=v?o[0]:o;var L=a.is.string(F);var h=a.is.plainObject(F);var f=a.is.event(F);var T=c;var C=this._private.cy||this;if(L){var N=F.split(/\s+/);F=[];for(var Y=0;Y<N.length;Y++){var I=N[Y];if(a.is.emptyString(I)){continue}var n=I.match(a.define.event.regex);var ad=n[1];var O=n[2]?n[2]:undefined;F.push({type:ad,namespace:O})}}else{if(h){var aa=F;F=[aa]}}if(g){if(!a.is.array(g)){g=[g]}}else{g=[]}for(var Y=0;Y<F.length;Y++){var r=F[Y];for(var X=0;X<B.length;X++){var M=B[X];var R=M._private.listeners;
var d=a.is.element(M);var E=d;var I;if(f){I=r}else{I=new a.Event(r,{cyTarget:M,cy:C,namespace:r.namespace});var H=a.define.event.props;for(var W=0;W<H.length;W++){var z=H[W];I[z]=r[z]}}if(A){R=[{namespace:I.namespace,type:I.type,callback:A}]}for(var W=0;W<R.length;W++){var e=R[W];var P=!e.namespace||e.namespace===I.namespace;var w=e.type===I.type;var Q=e.delegated?(M!==I.cyTarget&&a.is.element(I.cyTarget)&&I.cyTarget.is(e.selector)):(true);var J=P&&w&&Q;if(J){var S=[I];S=S.concat(g);if(e.data){I.data=e.data
}else{I.data=undefined}if(e.unbindSelfOnTrigger||e.unbindAllBindersOnTrigger){R.splice(W,1);W--}if(e.unbindAllBindersOnTrigger){var u=e.binders;for(var V=0;V<u.length;V++){var t=u[V];if(!t||t===M){continue}var D=t._private.listeners;for(var U=0;U<D.length;U++){var ab=D[U];if(ab===e){D.splice(U,1);U--}}}}var ac=e.delegated?I.cyTarget:M;var K=e.callback.apply(ac,S);if(K===false||I.isPropagationStopped()){E=false;if(K===false){I.stopPropagation();I.preventDefault()}}}}if(E){var s=M.parent();var Z=s.length!==0;
if(Z){s=s[0];s.trigger(I)}else{C.trigger(I)}}}}return o}}}})(cytoscape);(function(a,b){a.Style=function(c){if(!(this instanceof a.Style)){return new a.Style(c)}if(!a.is.core(c)){a.util.error("A style must have a core reference");return}this._private={cy:c,coreStyle:{}};this.length=0;this.addDefaultStylesheet()};a.style=a.Style;a.styfn=a.Style.prototype;a.fn.style=function(c,d){for(var f in c){var e=c[f];a.Style.prototype=e}};a.stylesheet=a.Stylesheet=function(){if(!(this instanceof a.Stylesheet)){return new a.Stylesheet()
}this.length=0};a.Stylesheet.prototype.selector=function(c){var d=this.length++;this[d]={selector:c,properties:[]};return this};a.Stylesheet.prototype.css=function(e,g){var f=this.length-1;if(a.is.string(e)){this[f].properties.push({name:e,value:g})}else{if(a.is.plainObject(e)){map=e;for(var d=0;d<a.style.properties.length;d++){var h=a.style.properties[d];var c=map[h.name];if(c===undefined){c=map[a.util.dash2camel(h.name)]}if(c!==undefined){var e=h.name;var g=c;this[f].properties.push({name:e,value:g})
}}}}return this};a.Stylesheet.prototype.generateStyle=function(l){var h=new a.Style(l);for(var f=0;f<this.length;f++){var e=this[f];var c=e.selector;var g=e.properties;h.selector(c);for(var d=0;d<g.length;d++){var k=g[d];h.css(k.name,k.value)}}return h};a.Stylesheet.prototype.assignToStyle=function(h){h.clear();for(var f=0;f<this.length;f++){var e=this[f];var c=e.selector;var g=e.properties;h.selector(c);for(var d=0;d<g.length;d++){var k=g[d];h.css(k.name,k.value)}}};(function(){var f=a.util.regex.number;
a.style.types={zeroOneNumber:{number:true,min:0,max:1,unitless:true},nonNegativeInt:{number:true,min:0,integer:true,unitless:true},size:{number:true,min:0},color:{color:true},lineStyle:{enums:["solid","dotted","dashed"]},curveStyle:{enums:["bundled","bezier"]},fontFamily:{regex:"^([\\w- ]+(?:\\s*,\\s*[\\w- ]+)*)$"},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","capitalize","uppercase","lowercase"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle"]},arrowShape:{enums:["tee","triangle","square","circle","diamond","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},cursor:{enums:["auto","crosshair","default","e-resize","n-resize","ne-resize","nw-resize","pointer","progress","s-resize","sw-resize","text","w-resize","wait","grab","grabbing"]},text:{string:true},data:{mapping:true,regex:"^data\\s*\\(\\s*(\\w+)\\s*\\)$"},mapData:{mapping:true,regex:"^mapData\\((\\w+)\\s*\\,\\s*("+f+")\\s*\\,\\s*("+f+")\\s*,\\s*(\\w+)\\s*\\,\\s*(\\w+)\\)$"}};
var d=a.style.types;a.style.properties=[{name:"cursor",type:d.cursor},{name:"text-valign",type:d.valign},{name:"text-halign",type:d.halign},{name:"color",type:d.color},{name:"content",type:d.text},{name:"text-outline-color",type:d.color},{name:"text-outline-width",type:d.size},{name:"text-outline-opacity",type:d.zeroOneNumber},{name:"text-opacity",type:d.zeroOneNumber},{name:"text-decoration",type:d.textDecoration},{name:"text-transform",type:d.textTransform},{name:"font-family",type:d.fontFamily},{name:"font-style",type:d.fontStyle},{name:"font-variant",type:d.fontVariant},{name:"font-weight",type:d.fontWeight},{name:"font-size",type:d.size},{name:"visibility",type:d.visibility},{name:"opacity",type:d.zeroOneNumber},{name:"z-index",type:d.nonNegativeInt},{name:"background-color",type:d.color},{name:"background-opacity",type:d.zeroOneNumber},{name:"border-color",type:d.color},{name:"border-opacity",type:d.zeroOneNumber},{name:"border-width",type:d.size},{name:"border-style",type:d.lineStyle},{name:"height",type:d.size},{name:"width",type:d.size},{name:"shape",type:d.nodeShape},{name:"source-arrow-shape",type:d.arrowShape},{name:"target-arrow-shape",type:d.arrowShape},{name:"source-arrow-color",type:d.color},{name:"target-arrow-color",type:d.color},{name:"line-style",type:d.lineStyle},{name:"line-color",type:d.color},{name:"control-point-step-size",type:d.size},{name:"curve-style",type:d.curveStyle},{name:"selection-box-color",type:d.color},{name:"selection-box-opacity",type:d.zeroOneNumber},{name:"selection-box-border-color",type:d.color},{name:"selection-box-border-width",type:d.size},{name:"panning-cursor",type:d.cursor}];
var e=a.style.properties;for(var c=0;c<e.length;c++){var g=e[c];e[g.name]=g}})();a.styfn.addDefaultStylesheet=function(){var c=this.containerPropertyAsString("font-family")||"sans-serif";var i=this.containerPropertyAsString("font-style")||"normal";var f=this.containerPropertyAsString("font-variant")||"normal";var e=this.containerPropertyAsString("font-weight")||"normal";var d=this.containerPropertyAsString("color")||"#000";var j=this.containerPropertyAsString("text-transform")||"none";var h=this.containerPropertyAsString("text-decoration")||"none";
var g=this.containerPropertyAsString("font-size")||12;this.selector("node, edge").css({cursor:"default","text-valign":"top","text-halign":"center",color:d,content:undefined,"text-outline-color":"transparent","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":j,"font-family":c,"font-style":i,"font-variant":f,"font-weight":e,"font-size":g,visibility:"visible",opacity:1,"z-index":0,content:""}).selector("node").css({"background-color":"#888","background-opacity":1,"border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse"}).selector("edge").css({"source-arrow-shape":"none","target-arrow-shape":"none","source-arrow-color":"#bbb","target-arrow-color":"#bbb","line-style":"solid","line-color":"#bbb",width:1,"control-point-step-size":40,"curve-style":"bezier"}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":0.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"panning-cursor":"grabbing"})
};a.styfn.clear=function(){for(var c=0;c<this.length;c++){delete this[c]}this.length=0;return this};a.styfn.resetToDefault=function(){this.clear();this.addDefaultStylesheet();return this};a.styfn.core=function(){return this._private.coreStyle};a.styfn.parse=function(B,t,l){B=a.util.camel2dash(B);var h=a.style.properties[B];if(!h){return null}if(t===undefined||t===null){return null}var j=a.is.string(t);if(j){t=a.util.trim(t)}var g=h.type;if(!g){return null}if(l&&(t===""||t===null)){return{name:B,value:t,bypass:true,deleteBypass:true}
}var A,o;if(!j){}else{if(A=new RegExp(a.style.types.data.regex).exec(t)){return{name:B,value:A,strValue:t,mapped:a.style.types.data,field:A[1],bypass:l}}else{if(o=new RegExp(a.style.types.mapData.regex).exec(t)){if(!(g.color||g.number)){return false}var d=this.parse(B,o[4]);if(!d||d.mapped){return false}var f=this.parse(B,o[5]);if(!f||f.mapped){return false}if(d.value===f.value){return false}else{if(g.color){var r=d.value;var p=f.value;var v=r[0]===p[0]&&r[1]===p[1]&&r[2]===p[2]&&(r[3]===p[3]||((r[3]==null||r[3]===1)&&(p[3]==null||p[3]===1)));
if(v){return false}}}return{name:B,value:o,strValue:t,mapped:a.style.types.mapData,field:o[1],fieldMin:parseFloat(o[2]),fieldMax:parseFloat(o[3]),valueMin:d.value,valueMax:f.value,bypass:l}}}}if(g.number){var u;if(!g.unitless){if(j){var k=t.match("^("+a.util.regex.number+")(px|em)?$");if(!k){return null}t=k[1];u=k[2]||"px"}else{u="px"}}t=parseFloat(t);if(g.integer&&!a.is.integer(t)){return null}if((g.min!==undefined&&t<g.min)||(g.max!==undefined&&t>g.max)){return null}var z={name:B,value:t,strValue:""+t+(u?u:""),units:u,bypass:l,pxValue:g.unitless?undefined:(u==="px"||!u?(t):(this.getEmSizeInPixels()*t))};
return z}else{if(g.color){var n=a.util.color2tuple(t);return{name:B,value:n,strValue:t,bypass:l}}else{if(g.enums){for(var w=0;w<g.enums.length;w++){var c=g.enums[w];if(c===t){return{name:B,value:t,strValue:t,bypass:l}}}}else{if(g.regex){var e=new RegExp(g.regex);var s=e.exec(t);if(s){return{name:B,value:s,strValue:t,bypass:l}}else{return null}}else{if(g.string){return{name:B,value:t,strValue:t,bypass:l}}else{return null}}}}}};a.styfn.getEmSizeInPixels=function(){var f=this._private.cy;var e=f.container();
if(b&&e){var d=b.getComputedStyle(e).getPropertyValue("font-size");var c=parseFloat(d);return c}else{return 1}};a.styfn.containerCss=function(c){var e=this._private.cy;var d=e.container();if(b&&d){return b.getComputedStyle(d).getPropertyValue(c)}};a.styfn.containerProperty=function(d){var c=this.containerCss(d);var e=this.parse(d,c);return e};a.styfn.containerPropertyAsString=function(c){var d=this.containerProperty(c);if(d){return d.strValue}};a.styfn.selector=function(d){var c=d==="core"?null:new a.Selector(d);
var e=this.length++;this[e]={selector:c,properties:[]};return this};a.styfn.css=function(){var d=arguments;switch(d.length){case 1:var f=d[0];for(var e=0;e<a.style.properties.length;e++){var g=a.style.properties[e];var c=f[g.name];if(c===undefined){c=f[a.util.dash2camel(g.name)]}if(c!==undefined){this.cssRule(g.name,c)}}break;case 2:this.cssRule(d[0],d[1]);break;default:break}return this};a.styfn.cssRule=function(c,g){var f=this.parse(c,g);if(f){var d=this.length-1;this[d].properties.push(f);var e=!this[d].selector;
if(e){this._private.coreStyle[f.name]=f}}return this};a.styfn.applyParsedProperty=function(n,v){var g=v;var t=n._private.style;var l,i;var h=a.style.properties[g.name].type;var m=g.bypass;var u=t[g.name];var p=u&&u.bypass;if(m&&g.deleteBypass){var o=t[g.name];if(!o){return true}else{if(o.bypass&&o.bypassed){t[g.name]=o.bypassed;return true}else{return false}}}switch(g.mapped){case a.style.types.mapData:l=n._private.data[g.field];if(!a.is.number(l)){return false}var d=(l-g.fieldMin)/(g.fieldMax-g.fieldMin);
if(h.color){var s=g.valueMin[0];var r=g.valueMax[0];var c=g.valueMin[1];var A=g.valueMax[1];var k=g.valueMin[2];var j=g.valueMax[2];var z=g.valueMin[3]==null?1:g.valueMin[3];var w=g.valueMax[3]==null?1:g.valueMax[3];var f=[Math.round(s+(r-s)*d),Math.round(c+(A-c)*d),Math.round(k+(j-k)*d),Math.round(z+(w-z)*d)];i={bypass:g.bypass,name:g.name,value:f,strValue:["rgba(",f[0],", ",f[1],", ",f[2],", ",f[3],")"].join("")}}else{if(h.number){var e=g.valueMin+(g.valueMax-g.valueMin)*d;i=this.parse(g.name,e,g.bypass)
}else{return false}}if(!i){return false}i.mapping=g;g=i;break;case a.style.types.data:l=n._private.data[g.field];i=this.parse(g.name,l,g.bypass);if(!i){return false}i.mapping=g;g=i;break;case undefined:break;default:return false}if(m){if(p){g.bypassed=u.bypassed}else{g.bypassed=u}t[g.name]=g}else{if(p){u.bypassed=g}else{t[g.name]=g}}return true};a.styfn.applyProperty=function(f,d,e){var c=this.parse(d,e);if(!c){return false}return this.applyParsedProperty(f,c)};a.styfn.apply=function(m){for(var d=0;
d<m.length;d++){var l=m[d];for(var g=0;g<this.length;g++){var e=this[g];var h=e.selector&&e.selector.filter(l).length>0;var k=e.properties;if(h){for(var f=0;f<k.length;f++){var c=k[f];this.applyParsedProperty(l,c)}}}}};a.styfn.update=function(){var d=this._private.cy;var c=d.elements();c.updateStyle()};a.styfn.getRenderedStyle=function(l){var l=l[0];if(l){var c={};var e=l._private.style;var h=this._private.cy;var k=h.zoom();for(var j=0;j<a.style.properties.length;j++){var d=a.style.properties[j];
var g=e[d.name];if(g){var f=g.unitless?g.strValue:(g.pxValue*k)+"px";c[d.name]=f;c[a.util.dash2camel(d.name)]=f}}return c}};a.styfn.getRawStyle=function(g){var g=g[0];if(g){var d={};var f=g._private.style;for(var e=0;e<a.style.properties.length;e++){var h=a.style.properties[e];var c=f[h.name];if(c){d[h.name]=c.strValue;d[a.util.dash2camel(h.name)]=c.strValue}}return d}};a.styfn.getValueStyle=function(g){var d,f;if(a.is.element(g)){d={};f=g._private.style}else{d={};f=g}if(f){for(var e=0;e<a.style.properties.length;
e++){var j=a.style.properties[e];var c=f[j.name]||f[a.util.dash2camel(j.name)];if(c!==undefined&&!a.is.plainObject(c)){c=this.parse(j.name,c)}if(c){var h=c.value===undefined?c:c.value;d[j.name]=h;d[a.util.dash2camel(j.name)]=h}}}return d};a.styfn.updateFunctionalProperties=function(c){for(var f=0;f<c.length;f++){var k=c[f];var h=k._private.style;for(var e=0;e<a.style.properties.length;e++){var l=a.style.properties[e];var g=h[l.name];if(g&&g.mapping){var d=g.mapping;this.applyParsedProperty(k,d)}}}};
a.styfn.applyBypass=function(o,d,m){var l=[];if(d==="*"||d==="**"){if(m!==undefined){for(var g=0;g<a.style.properties.length;g++){var c=a.style.properties[g];var d=c.name;var k=this.parse(d,m,true);if(k){l.push(k)}}}}else{if(a.is.string(d)){var k=this.parse(d,m,true);if(k){l.push(k)}}else{if(a.is.plainObject(d)){var e=d;for(var g=0;g<a.style.properties.length;g++){var c=a.style.properties[g];var d=c.name;var m=e[d];if(m===undefined){m=e[a.util.dash2camel(d)]}if(m!==undefined){var k=this.parse(d,m,true);
if(k){l.push(k)}}}}else{return false}}}if(l.length===0){return false}var h=false;for(var g=0;g<o.length;g++){var n=o[g];for(var f=0;f<l.length;f++){var c=l[f];h=this.applyParsedProperty(n,c)||h}}return h};a.styfn.removeAllBypasses=function(c){for(var g=0;g<a.style.properties.length;g++){var l=a.style.properties[g];var f=l.name;var k="";var d=this.parse(f,k,true);for(var e=0;e<c.length;e++){var h=c[e];this.applyParsedProperty(h,d)}}};a.styfn.calculateControlPoints=function(c){var p={};var u=false;
var j=c.length;for(var n=0;n<c.length;n++){var v=c[n];var t=v._private.style["curve-style"].strValue==="bundled";if(t){u=true;break}}var s=j%2!==0&&!u;for(var n=0;n<c.length;n++){var g=c[n];var k=g._private.data.id;var h=g.source();var o=g.target();var r=h.position();var l=o.position();var w={x:(r.x+l.x)/2,y:(r.y+l.y)/2};var d=g._private.style["control-point-step-size"].pxValue;var f=(j-1)*-d/2;if(h.id()==o.id()){c[n]._private.rscratch.isSelfEdge=true;g._private.rscratch.cp2ax=r.x;g._private.rscratch.cp2ay=r.y-1.3*d*(n/3+1);
g._private.rscratch.cp2cx=r.x-1.3*d*(n/3+1);g._private.rscratch.cp2cy=r.y;g._private.rscratch.selfEdgeMidX=(g._private.rscratch.cp2ax+g._private.rscratch.cp2cx)/2;g._private.rscratch.selfEdgeMidY=(g._private.rscratch.cp2ay+g._private.rscratch.cp2cy)/2;continue}var m=f+d*n;if(j%2==1&&n==Math.floor(j/2)){c[n]._private.rscratch.isStraightEdge=true;continue}c[n]._private.rscratch.isBezierEdge=true;var A={x:l.y-r.y,y:r.x-l.x};var z=Math.sqrt(A.x*A.x+A.y*A.y);if(h.id()>o.id()){z*=-1}A.x/=z;A.y/=z;c[n]._private.rscratch.cp2x=w.x+A.x*m;
c[n]._private.rscratch.cp2y=w.y+A.y*m}}})(cytoscape,typeof window==="undefined"?null:window);(function(a){a.fn.core=function(b,d){for(var c in b){var e=b[c];a.Core.prototype[c]=e}};a.Core=function(f){if(!(this instanceof a.Core)){return new a.Core(f)}var g=this;var b=f.container;var d=a.getRegistrationForInstance(g,b);if(d){d.cy=this;d.domElement=b;d.ready=false}else{d=a.registerInstance(g,b)}var e=d.readies;var c=f;c.layout=a.util.extend({name:typeof module==="undefined"?"grid":"null"},c.layout);
c.renderer=a.util.extend({name:typeof module==="undefined"?"canvas":"null"},c.renderer);this._private={ready:false,instanceId:null,options:c,elements:[],id2index:{},listeners:[],aniEles:[],scratch:{},layout:null,renderer:null,notificationsEnabled:true,minZoom:1e-50,maxZoom:1e+50,zoomEnabled:true,panEnabled:true,zoom:a.is.number(c.zoom)?c.zoom:1,pan:{x:a.is.plainObject(c.pan)&&a.is.number(c.pan.x)?c.pan.x:0,y:a.is.plainObject(c.pan)&&a.is.number(c.pan.y)?c.pan.y:0,}};if(a.is.number(c.minZoom)&&a.is.number(c.maxZoom)&&c.minZoom<c.maxZoom){this._private.minZoom=c.minZoom;
this._private.maxZoom=c.maxZoom}else{if(a.is.number(c.minZoom)&&c.maxZoom===undefined){this._private.minZoom=c.minZoom}else{if(a.is.number(c.maxZoom)&&c.minZoom===undefined){this._private.maxZoom=c.maxZoom}}}this._private.style=a.is.stylesheet(c.style)?c.style.generateStyle(this):new a.Style(g);g.initRenderer(c.renderer);g.load(c.elements,function(){g.startAnimationLoop();d.ready=true;for(var h=0;h<e.length;h++){var j=e[h];g.bind("ready",j)}d.readies=[];if(a.is.fn(c.ready)){g.bind("ready",c.ready)
}g.trigger("ready")},c.done)};a.corefn=a.Core.prototype;a.fn.core({ready:function(){return this._private.ready},registered:function(){if(this._private&&this._private.instanceId!=null){return true}else{return false}},registeredId:function(){return this._private.instanceId},getElementById:function(c){var b=this._private.id2index[c];if(b!==undefined){return this._private.elements[b]}return new a.Collection(this)},addToPool:function(c){var g=this._private.elements;var j=this._private.id2index;for(var e=0;
e<c.length;e++){var f=c[e];var h=f._private.data.id;var d=j[h];var b=d!==undefined;if(!b){d=g.length;g.push(f);j[h]=d}}return this},removeFromPool:function(m){var b=this._private.elements;var e=this._private.id2index;for(var g=0;g<m.length;g++){var l=m[g];var c=l._private.data.id;var h=e[c];var k=h!==undefined;if(k){delete this._private.id2index[c];b.splice(h,1);for(var f=h;f<b.length;f++){var d=b[f]._private.data.id;e[d]--}}}},container:function(){return this._private.options.container},options:function(){return a.util.copy(this._private.options)
},json:function(c){var b={};var d=this;b.elements={};d.elements().each(function(e,f){var g=f.group();if(!b.elements[g]){b.elements[g]=[]}b.elements[g].push(f.json())});b.style=d.style();b.scratch=d.scratch();b.zoomEnabled=d._private.zoomEnabled;b.panEnabled=d._private.panEnabled;b.layout=d._private.options.layout;b.renderer=d._private.options.renderer;return b}})})(cytoscape);(function(a,b){a.fn.core({add:function(d){var c;var e=this;if(a.is.elementOrCollection(d)){var u=d;var n=[];for(var h=0;h<u.length;
h++){var t=u[h];n.push(t.json())}c=new a.Collection(e,n)}else{if(a.is.array(d)){var n=d;c=new a.Collection(e,n)}else{if(a.is.plainObject(d)&&(a.is.array(d.nodes)||a.is.array(d.edges))){var l=d;var n=[];var o=["nodes","edges"];for(var h=0,p=o.length;h<p;h++){var r=o[h];var m=l[r];if(a.is.array(m)){for(var f=0,g=m.length;f<g;f++){var s=m[f];var k=a.util.extend({},s,{group:r});n.push(k)}}}c=new a.Collection(e,n)}else{var s=d;c=(new a.Element(e,s)).collection()}}}return c.filter(function(){return !this.removed()
})},remove:function(d){if(!a.is.elementOrCollection(d)){d=d}else{if(a.is.string(d)){var c=d;d=this.$(c)}}return d.remove()},load:function(f,g,e){var i=this;var d=i.elements();if(d.length>0){d.remove()}i.notifications(false);var c=[];if(f!=null){if(a.is.plainObject(f)||a.is.array(f)){i.add(f)}}function h(){i.one("layoutready",function(j){i.notifications(true);i.trigger(j);i.notify({type:"load",collection:i.elements(),style:i._private.style});i.one("load",g);i.trigger("load")}).one("layoutstop",function(){i.one("done",e);
i.trigger("done")});i.layout(i._private.options.layout)}if(b&&b.chrome){setTimeout(function(){h()},30)}else{h()}return this}})})(cytoscape,typeof window==="undefined"?null:window);(function(a){a.fn.core({addToAnimationPool:function(b){var h=this;var c=h._private.aniEles;var e=[];for(var d=0;d<c.length;d++){var g=c[d]._private.data.id;e[g]=true}for(var d=0;d<b.length;d++){var f=b[d];var g=f._private.data.id;if(!e[g]){c.push(f)}}},startAnimationLoop:function(){var g=this;var f=10;var l=false;var i=true;
g._private.aniEles=[];var j=typeof window==="undefined"?function(){}:(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame);if(j==null||!i){j=function(m){window.setTimeout(function(){m(+new Date)},f)}}var c=g.container();function k(){function m(){j(function(n){d(n);k()},c)}if(l){setTimeout(function(){m()},f)}else{m()}}k();function d(p){var B=g._private.aniEles;for(var v=0;v<B.length;v++){var A=B[v];var w=A._private.animation.current;
var u=A._private.animation.queue;if(w.length===0){var n=u;var t=n.length>0?n.shift():null;if(t!=null){t.callTime=+new Date;w.push(t)}}var z=[];for(var s=0;s<w.length;s++){var r=w[s];e(A,r,p);if(w[s].done){z.push(r);w.splice(s,1);s--}}for(var s=0;s<z.length;s++){var r=z[s];var o=r.params.complete;if(a.is.fn(o)){o.apply(A,[p])}}}if(B.length>0){g.notify({type:"draw",collection:B})}for(var s=0;s<B.length;s++){var A=B[s];var u=A._private.animation.queue;var w=A._private.animation.current;var m=w.length>0||u.length>0;
if(!m){B.splice(s,1);s--}}}function e(F,w,s){var n=g.style();var C=w.properties;var v=w.params;var t=w.callTime;var B;if(w.duration===0){B=1}else{B=Math.min(1,(s-t)/w.duration)}if(C.delay==null){var A=w.startPosition;var r=C.position;var E=F._private.position;if(r){if(b(A.x,r.x)){E.x=h(A.x,r.x,B)}if(b(A.y,r.y)){E.y=h(A.y,r.y,B)}}if(C.css){var D=a.style.properties;for(var z=0;z<D.length;z++){var m=D[z].name;var u=C.css[m];if(u!==undefined){var p=w.startStyle[m];var o=h(p,u,B);n.applyBypass(F,m,o)}}}}if(a.is.fn(v.step)){v.step.apply(F,[s])
}if(B>=1){w.done=true}return B}function b(n,m){if(n==null||m==null){return false}if(a.is.number(n)&&a.is.number(m)){return true}else{if((n)&&(m)){return true}}return false}function h(o,p,v){if(a.is.number(o)&&a.is.number(p)){return o+(p-o)*v}else{if(a.is.number(o[0])&&a.is.number(p[0])){var t=o;var s=p;function n(A,r){var B=r-A;var z=A;return Math.round(v*B+z)}var m=n(t[0],s[0]);var u=n(t[1],s[1]);var w=n(t[2],s[2]);return a.util.tuple2hex([m,u,w])}}return undefined}}})})(cytoscape);(function(a){a.fn.core({data:a.define.data({field:"data",bindingEvent:"data",allowBinding:true,allowSetting:true,settingEvent:"data",settingTriggersEvent:true,triggerFnName:"trigger",allowGetting:true}),removeData:a.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:true}),scratch:a.define.data({field:"scratch",allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:true}),removeScratch:a.define.removeData({field:"scratch",triggerEvent:false}),})
})(cytoscape);(function(a){a.fn.core({on:a.define.on(),one:a.define.on({unbindSelfOnTrigger:true}),once:a.define.on({unbindAllBindersOnTrigger:true}),off:a.define.off(),trigger:a.define.trigger(),});a.corefn.bind=a.corefn.on;a.corefn.unbind=a.corefn.off;a.define.event.aliasesOn(a.corefn)})(cytoscape);(function(a){a.fn.core({layout:function(b){var c=this;if(b==null){b=this._private.options.layout}this.initLayout(b);c.trigger("layoutstart");this._private.layout.run();return this},initLayout:function(d){if(d==null){a.util.error("Layout options must be specified to run a layout");
return}if(d.name==null){a.util.error("A `name` must be specified to run a layout");return}var c=d.name;var b=a.extension("layout",c);if(b==null){a.util.error("Can not apply layout: No such layout `%s` found; did you include its JS file?",c);return}this._private.layout=new b(a.util.extend({},d,{renderer:this._private.renderer,cy:this}));this._private.options.layout=d}})})(cytoscape);(function(a){a.fn.core({notify:function(e){if(!this._private.notificationsEnabled){return}var d=this.renderer();var f=this;
if(a.is.element(e.collection)){var b=e.collection;e.collection=new a.Collection(f,[b])}else{if(a.is.array(e.collection)){var c=e.collection;e.collection=new a.Collection(f,c)}}d.notify(e)},notifications:function(b){var c=this._private;if(b===undefined){return c.notificationsEnabled}else{c.notificationsEnabled=b?true:false}},noNotifications:function(b){this.notifications(false);b();this.notifications(true)}})})(cytoscape);(function(a){a.fn.core({renderer:function(){return this._private.renderer},initRenderer:function(c){var d=this;
var b=a.extension("renderer",c.name);if(b==null){a.util.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",c.name);return}this._private.renderer=new b(a.util.extend({},c,{cy:d,style:d._private.style}))}})})(cytoscape);(function(a){a.fn.core({collection:function(b){if(a.is.string(b)){return this.$(b)}else{if(a.is.elementOrCollection(b)){return b.collection()}}return new a.Collection(this)},nodes:function(b){var c=this.$("node");if(b){return c.filter(b)}return c},edges:function(b){var c=this.$("edge");
if(b){return c.filter(b)}return c},$:function(c){var b=new a.Collection(this,this._private.elements);if(c){return b.filter(c)}return b}});a.corefn.elements=a.corefn.filter=a.corefn.$})(cytoscape);(function(a){a.fn.core({style:function(b){return this._private.style}})})(cytoscape);(function(a){a.fn.core({panningEnabled:function(b){if(b!==undefined){this._private.panEnabled=b?true:false}else{return this._private.panEnabled}return this},zoomingEnabled:function(b){if(b!==undefined){this._private.zoomEnabled=b?true:false
}else{return this._private.zoomEnabled}return this},pan:function(){var c=arguments;var g=this._private.pan;var d,f,e,b,h;switch(c.length){case 0:return g;case 1:if(!this._private.panEnabled){return this}else{if(a.is.string(c[0])){d=c[0];return g[d]}else{if(a.is.plainObject(c[0])){e=c[0];b=e.x;h=e.y;if(a.is.number(b)){g.x=b}if(a.is.number(h)){g.y=h}this.trigger("pan")}}}break;case 2:if(!this._private.panEnabled){return this}d=c[0];f=c[1];if((d==="x"||d==="y")&&a.is.number(f)){g[d]=f}this.trigger("pan");
break;default:break}this.notify({type:"viewport"});return this},panBy:function(h){var c=arguments;var g=this._private.pan;var d,f,e,b,i;if(!this._private.panEnabled){return this}switch(c.length){case 1:if(a.is.plainObject(c[0])){e=c[0];b=e.x;i=e.y;if(a.is.number(b)){g.x+=b}if(a.is.number(i)){g.y+=i}this.trigger("pan")}break;case 2:d=c[0];f=c[1];if((d==="x"||d==="y")&&a.is.number(f)){g[d]+=f}this.trigger("pan");break;default:break}this.notify({type:"viewport"});return this},fit:function(f,g){if(a.is.number(f)&&g===undefined){g=f;
f=undefined}if(!this._private.panEnabled||!this._private.zoomEnabled){return this}var i=this.boundingBox(f);var d=this.style();var b=parseFloat(d.containerCss("width"));var c=parseFloat(d.containerCss("height"));var e;g=a.is.number(g)?g:0;if(!isNaN(b)&&!isNaN(c)){e=this._private.zoom=Math.min((b-2*g)/i.w,(c-2*g)/i.h);e=e>this._private.maxZoom?this._private.maxZoom:e;e=e<this._private.minZoom?this._private.minZoom:e;this._private.pan={x:(b-e*(i.x1+i.x2))/2,y:(c-e*(i.y1+i.y2))/2}}this.trigger("pan zoom");
this.notify({type:"viewport"});return this},minZoom:function(b){if(b===undefined){return this._private.minZoom}else{if(a.is.number(b)){this._private.minZoom=b}}return this},maxZoom:function(b){if(b===undefined){return this._private.maxZoom}else{if(a.is.number(b)){this._private.maxZoom=b}}return this},zoom:function(d){var j;var k;if(d===undefined){return this._private.zoom}else{if(a.is.number(d)){k=d;j={x:0,y:0}}else{if(a.is.plainObject(d)){k=d.level;if(d.renderedPosition){var l=d.renderedPosition;
var b=this._private.pan;var i=this._private.zoom;j={x:(l.x-b.x)/i,y:(l.y-b.y)/i}}else{if(d.position){j=d.position}}if(j&&!this._private.panEnabled){return this}}}}if(!this._private.zoomEnabled){return this}if(!a.is.number(k)||!a.is.number(j.x)||!a.is.number(j.y)){return this}k=k>this._private.maxZoom?this._private.maxZoom:k;k=k<this._private.minZoom?this._private.minZoom:k;var g=this._private.pan;var h=this._private.zoom;var f=k;var e={x:-f/h*(j.x-g.x)+j.x,y:-f/h*(j.y-g.y)+j.y};this._private.zoom=k;
this._private.pan=e;var c=g.x!==e.x||g.y!==e.y;this.trigger("zoom"+(c?" pan":""));this.notify({type:"viewport"});return this},boundingBox:function(r){var p;if(!r||(a.is.elementOrCollection(r)&&r.length===0)){p=this.$()}else{if(a.is.string(r)){p=this.$(r)}else{if(a.is.elementOrCollection(r)){p=r}}}var v=Infinity;var u=-Infinity;var d=Infinity;var c=-Infinity;for(var s=0;s<p.length;s++){var l=p[s];if(l.isNode()){var f=l._private.position;var j=f.x;var g=f.y;var k=l.outerWidth();var e=k/2;var t=l.outerHeight();
var m=t/2;var o=j-e;var n=j+e;var b=g-m;var z=g+m;v=o<v?o:v;u=n>u?n:u;d=b<d?b:d;c=z>c?z:c}}return{x1:v,x2:u,y1:d,y2:c,w:u-v,h:c-d}},center:function(f){if(!this._private.panEnabled||!this._private.zoomEnabled){return this}var g=this.boundingBox(f);var d=this.style();var b=parseFloat(d.containerCss("width"));var c=parseFloat(d.containerCss("height"));var e=this._private.zoom;this.pan({x:(b-e*(g.x1+g.x2))/2,y:(c-e*(g.y1+g.y2))/2});this.trigger("pan");this.notify({type:"viewport"});return this},reset:function(){if(!this._private.panEnabled||!this._private.zoomEnabled){return this
}this.pan({x:0,y:0});if(this._private.maxZoom>1&&this._private.minZoom<1){this.zoom(1)}this.notify({type:"viewport"});return this}})})(cytoscape);(function(b){b.fn.collection=b.fn.eles=function(c,e){for(var d in c){var f=c[d];b.Collection.prototype[d]=f}};var a={prefix:{nodes:"n",edges:"e"},id:{nodes:0,edges:0},generate:function(h,d,g){var c=b.is.element(d)?d._private:d;var e=c.group;var f=g!=null?g:this.prefix[e]+this.id[e];if(h.getElementById(f).empty()){this.id[e]++}else{while(!h.getElementById(f).empty()){f=this.prefix[e]+(++this.id[e])
}}return f}};b.Element=function(d,f,h){if(!(this instanceof b.Element)){return new b.Element(d,f,h)}var n=this;h=(h===undefined||h?true:false);if(d===undefined||f===undefined||!b.is.core(d)){b.util.error("An element must have a core reference and parameters set");return}if(f.group!=="nodes"&&f.group!=="edges"){b.util.error("An element must be of type `nodes` or `edges`; you specified `"+f.group+"`");return}this.length=1;this[0]=this;this._private={cy:d,single:true,data:f.data||{},position:f.position||{},listeners:[],group:f.group,style:{},removed:true,selected:f.selected?true:false,selectable:f.selectable===undefined?true:(f.selectable?true:false),locked:f.locked?true:false,grabbed:false,grabbable:f.grabbable===undefined?true:(f.grabbable?true:false),classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:{},edges:[],children:[]};
if(f.renderedPosition){var o=f.renderedPosition;var j=d.pan();var m=d.zoom();this._private.position={x:(o.x-j.x)/m,y:(o.y-j.y)/m}}if(b.is.string(f.classes)){var e=f.classes.split(/\s+/);for(var g=0,c=e.length;g<c;g++){var k=e[g];if(!k||k===""){continue}n._private.classes[k]=true}}if(h===undefined||h){this.restore()}};b.Collection=function(h,c){if(!(this instanceof b.Collection)){return new b.Collection(h,c)}if(h===undefined||!b.is.core(h)){b.util.error("A collection must have a reference to the core");
return}var d={};var f=[];var o=false;if(!c){c=[]}else{if(c.length>0&&b.is.plainObject(c[0])&&!b.is.element(c[0])){o=true;var s=[];var j={};for(var n=0,g=c.length;n<g;n++){var p=c[n];if(p.data==null){p.data={}}var m=p.data;if(m.id==null){m.id=a.generate(h,p)}else{if(h.getElementById(m.id).length!=0||j[m.id]){continue}}var r=new b.Element(h,p,false);s.push(r);j[m.id]=true}c=s}}for(var n=0,g=c.length;n<g;n++){var k=c[n];if(!k){continue}var e=k._private.data.id;if(!d[e]){d[e]=k;f.push(k)}}for(var n=0,g=f.length;
n<g;n++){this[n]=f[n]}this.length=f.length;this._private={cy:h,ids:d};if(o){this.restore()}};b.elefn=b.elesfn=b.Element.prototype=b.Collection.prototype;b.elesfn.cy=function(){return this._private.cy};b.elesfn.element=function(){return this[0]};b.elesfn.collection=function(){if(b.is.collection(this)){return this}else{return new b.Collection(this._private.cy,[this])}};b.elesfn.json=function(){var g=this.element();if(g==null){return undefined}var h=g._private;var f=b.util.copy({data:h.data,position:h.position,group:h.group,bypass:h.bypass,removed:h.removed,selected:h.selected,selectable:h.selectable,locked:h.locked,grabbed:h.grabbed,grabbable:h.grabbable,classes:"",scratch:h.scratch});
var e=[];for(var c in h.classes){e.push(c)}for(var d=0;d<e.length;d++){var c=e[d];f.classes+=c+(d<e.length-1?" ":"")}return f};b.elesfn.restore=function(r){var p=this;var G=[];var e=p.cy();if(r===undefined){r=true}var n=[];var u=0;var d=0;for(var D=0,z=p.length;D<z;D++){var m=p[D];if(m.isNode()){n.unshift(m);u++}else{n.push(m);d++}}for(var D=0,z=n.length;D<z;D++){var m=n[D];if(!m.removed()){continue}var o=m._private;var H=o.data;if(H.id===undefined){H.id=a.generate(e,m)}else{if(b.is.emptyString(H.id)||!b.is.string(H.id)){continue
}else{if(e.getElementById(H.id).length!=0){continue}}}var s=H.id;if(m.isEdge()){var g=m;var t=["source","target"];var v=t.length;for(var A=0;A<v;A++){var c=t[A];var I=H[c];if(I==null||I===""){continue}else{if(e.getElementById(I).empty()){continue}}}var h=e.getElementById(H.source);var C=e.getElementById(H.target);h._private.edges.push(g);C._private.edges.push(g)}o.ids={};o.ids[H.id]=m;o.removed=false;e.addToPool(m);G.push(m)}for(var D=0;D<u;D++){var w=n[D];var H=w._private.data;var s=H.id;var B=w._private.data.parent;
var f=B!=null;if(f){var k=e.getElementById(B);if(k.empty()){delete H.parent}else{var E=false;var F=k;while(!F.empty()){if(w.same(F)){E=true;delete H.parent;break}F=F.parent()}if(!E){k[0]._private.children.push(w)}}}}G=new b.Collection(e,G);if(G.length>0){G.updateStyle(false);G.connectedNodes().updateStyle(r);if(r){G.rtrigger("add")}else{G.trigger("add")}}return p};b.elesfn.removed=function(){var c=this[0];return c&&c._private.removed};b.elesfn.inside=function(){var c=this[0];return c&&!c._private.removed
};b.elesfn.remove=function(j){var s=this;var n=[];var d=[];var e={};var g=s._private.cy;if(j===undefined){j=true}function k(w){var l=w._private.edges;for(var v=0;v<l.length;v++){r(l[v])}}function u(w){var v=w._private.children;for(var l=0;l<v.length;l++){r(v[l])}}function r(i){var l=e[i.id()];if(l){return}else{e[i.id()]=true}if(i.isNode()){d.push(i);k(i);u(i)}else{d.unshift(i)}}for(var m=0,f=s.length;m<f;m++){var t=s[m];r(t)}function p(z,w){var i=z._private.edges;for(var l=0;l<i.length;l++){var v=i[l];
if(w===v){i.splice(l,1);break}}}for(var m=0;m<d.length;m++){var t=d[m];t._private.removed=true;g.removeFromPool(t);n.push(t);if(t.isEdge()){var c=t.source()[0];var h=t.target()[0];p(c,t);p(h,t)}}var o=new b.Collection(this.cy(),n);if(o.size()>0){if(j){this.cy().notify({type:"remove",collection:o})}o.trigger("remove")}return this}})(cytoscape);(function(a){a.fn.eles({animated:function(){var b=this[0];if(b){return b._private.animation.current.length>0}},clearQueue:function(){for(var b=0;b<this.length;
b++){var c=this[b];c._private.animation.queue=[]}return this},delay:function(c,b){this.animate({delay:c},{duration:c,complete:b});return this},animate:function(j,e){var c=+new Date;var d=this._private.cy;var b=d.style();if(e===undefined){e={}}if(e.duration===undefined){e.duration=400}switch(e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200;break}if(j==null||(j.position==null&&j.css==null&&j.delay==null)){return this}if(j.css){j.css=b.getValueStyle(j.css)}for(var h=0;h<this.length;
h++){var l=this[h];var k=l._private.position;var g={x:k.x,y:k.y};var f=b.getValueStyle(l);if(l.animated()&&(e.queue===undefined||e.queue)){q=l._private.animation.queue}else{q=l._private.animation.current}q.push({properties:j,duration:e.duration,params:e,callTime:c,startPosition:g,startStyle:f})}d.addToAnimationPool(this);return this},stop:function(f,h){for(var e=0;e<this.length;e++){var c=this[e];var b=c._private.animation.current;for(var d=0;d<b.length;d++){var g=b[d];if(h){g.duration=0}}if(f){c._private.animation.queue=[]
}}this.cy().notify({collection:this,type:"draw"});return this}})})(cytoscape);(function(a){a.fn.eles({addClass:function(g){g=g.split(/\s+/);var c=this;var k=[];for(var f=0;f<g.length;f++){var b=g[f];if(a.is.emptyString(b)){continue}for(var d=0;d<c.length;d++){var h=c[d];var e=h._private.classes[b];h._private.classes[b]=true;if(!e){k.push(h)}}}new a.Collection(this._private.cy,k).updateStyle();c.trigger("class");return c},hasClass:function(b){var c=this[0];return c!=null&&c._private.classes[b]},toggleClass:function(h,g){var b=h.split(/\s+/);
var n=this;var e=[];for(var f=0,k=n.length;f<k;f++){var o=n[f];for(var c=0;c<b.length;c++){var m=b[c];if(a.is.emptyString(m)){continue}var d=o._private.classes[m];var l=g||(g===undefined&&!d);if(l){o._private.classes[m]=true;if(!d){e.push(o)}}else{o._private.classes[m]=false;if(d){e.push(o)}}}}new a.Collection(this._private.cy,e).updateStyle();n.trigger("class");return n},removeClass:function(g){g=g.split(/\s+/);var c=this;var k=[];for(var f=0;f<c.length;f++){var h=c[f];for(var d=0;d<g.length;d++){var b=g[d];
if(!b||b===""){continue}var e=h._private.classes[b];delete h._private.classes[b];if(e){k.push(h)}}}new a.Collection(c._private.cy,k).updateStyle();c.trigger("class");return c}})})(cytoscape);(function(a){a.fn.eles({allAre:function(b){return this.filter(b).length===this.length},is:function(b){return this.filter(b).length>0},same:function(b){b=this.cy().collection(b);if(this.length!==b.length){return false}return this.intersect(b).length===this.length},anySame:function(b){b=this.cy().collection(b);
return this.intersect(b).length>0},allAreNeighbors:function(b){b=this.cy().collection(b);return this.neighborhood().intersect(b).length===b.length}})})(cytoscape);(function(a){a.fn.eles({updateStyle:function(b){var d=this._private.cy;var c=d.style();b=b||b===undefined?true:false;c.apply(this);if(b){this.rtrigger("style")}else{this.trigger("style")}return this},updateMappers:function(b){var f=this._private.cy;var d=f.style();b=b||b===undefined?true:false;for(var c=0;c<this.length;c++){var e=this[c];
d.apply(e)}if(b){this.rtrigger("style")}else{this.trigger("style")}return this},data:a.define.data({field:"data",bindingEvent:"data",allowBinding:true,allowSetting:true,settingEvent:"data",settingTriggersEvent:true,triggerFnName:"trigger",allowGetting:true,immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),removeData:a.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:true,immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),scratch:a.define.data({field:"scratch",allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:true}),removeScratch:a.define.removeData({field:"scratch",triggerEvent:false}),rscratch:a.define.data({field:"rscratch",allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:true}),removeRscratch:a.define.removeData({field:"rscratch",triggerEvent:false}),id:function(){var b=this[0];
if(b){return b._private.data.id}},position:a.define.data({field:"position",bindingEvent:"position",allowBinding:true,allowSetting:true,settingEvent:"position",settingTriggersEvent:true,triggerFnName:"rtrigger",allowGetting:true,validKeys:["x","y"]}),positions:function(f){if(a.is.plainObject(f)){this.position(f)}else{if(a.is.fn(f)){var c=f;for(var b=0;b<this.length;b++){var d=this[b];var f=c.apply(d,[b,d]);var e=d._private.position;e.x=f.x;e.y=f.y}this.rtrigger("position")}}return this},renderedPosition:function(d){var c=this[0];
var h=this.cy();var b=h.zoom();var f=h.pan();if(c&&c.isNode()){var g=c._private.position;var e={x:g.x*b+f.x,y:g.y*b+f.y};if(d===undefined){return e}else{return e[d]}}},renderedCss:function(d){var c=this[0];if(c){var b=c.cy().style().getRenderedStyle(c);if(d===undefined){return b}else{return b[d]}}},css:function(b,f){var d=this.cy().style();if(a.is.plainObject(b)){var c=b;d.applyBypass(this,c);this.rtrigger("style")}else{if(a.is.string(b)){if(f===undefined){var e=this[0];if(e){return e._private.style[b].strValue
}else{return}}else{d.applyBypass(this,b,f);this.rtrigger("style")}}else{if(b===undefined){var e=this[0];if(e){return d.getRawStyle(e)}else{return}}}}return this},removeCss:function(){var d=this.cy().style();var b=this;for(var c=0;c<b.length;c++){var e=b[c];d.removeAllBypasses(e)}this.rtrigger("style")},show:function(){this.css("visibility","visible");return this},hide:function(){this.css("visibility","hidden");return this},visible:function(){var f=this[0];if(f){if(f.css("visibility")!=="visible"){return false
}if(f.isNode()){var c=f.parents();for(var d=0;d<c.length;d++){var e=c[d];var b=e.css("visibility");if(b!=="visible"){return false}}return true}else{if(f.isEdge()){var g=f.source();var h=f.target();return g.visible()&&h.visible()}}}},hidden:function(){var b=this[0];if(b){return !this.visible()}},width:function(){var b=this[0];if(b){return this._private.style.width.pxValue}},outerWidth:function(){var e=this[0];if(e){var d=this._private.style;var c=d.width.pxValue;var b=d["border-width"]?d["border-width"].pxValue:0;
return c+b}},renderedWidth:function(){var c=this[0];if(c){var b=this.width();return b*this.cy().zoom()}},renderedOuterWidth:function(){var c=this[0];if(c){var b=this.outerWidth();return b*this.cy().zoom()}},height:function(){var b=this[0];if(b&&b.isNode()){return this._private.style.height.pxValue}},outerHeight:function(){var e=this[0];if(e){var d=this._private.style;var b=d.height.pxValue;var c=d["border-width"]?d["border-width"].pxValue:0;return b+c}},renderedHeight:function(){var c=this[0];if(c){var b=this.height();
return b*this.cy().zoom()}},renderedOuterHeight:function(){var c=this[0];if(c){var b=this.outerHeight();return b*this.cy().zoom()}},offset:function(){var e=this[0];if(e&&e.isNode()){var g={x:e._private.position.x,y:e._private.position.y};var b=e.parents();for(var c=0;c<b.length;c++){var d=b[c];var f=d._private.position;g.x+=f.x;g.y+=f.y}return g}},renderedOffset:function(){var c=this[0];if(c&&c.isNode()){var e=this.offset();var f=this.cy();var b=f.zoom();var d=f.pan();return{x:e.x*b+d.x,y:e.y*b+d.y}
}}})})(cytoscape);(function(b){function a(d){return function(){var f=this;if(f.length===0){return}if(f.isNode()&&!f.removed()){var k=0;var j=f[0];var e=j._private.edges;for(var g=0;g<e.length;g++){var h=e[g];k+=d(j,h)}return k}else{return}}}b.fn.eles({degree:a(function(e,d){if(d.source().same(d.target())){return 2}else{return 1}}),indegree:a(function(e,d){if(d.target().same(e)){return 1}else{return 0}}),outdegree:a(function(e,d){if(d.source().same(e)){return 1}else{return 0}})});function c(e,d){return function(){var g=undefined;
var f=this.nodes();for(var h=0;h<f.length;h++){var j=f[h];var k=j[e]();if(k!==undefined&&(g===undefined||d(k,g))){g=k}}return g}}b.fn.eles({minDegree:c("degree",function(e,d){return e<d}),maxDegree:c("degree",function(e,d){return e>d}),minIndegree:c("indegree",function(e,d){return e<d}),maxIndegree:c("indegree",function(e,d){return e>d}),minOutdegree:c("outdegree",function(e,d){return e<d}),maxOutdegree:c("outdegree",function(e,d){return e>d})});b.fn.eles({totalDegree:function(){var f=0;var d=this.nodes();
for(var e=0;e<d.length;e++){f+=d[e].degree()}return f}})})(cytoscape);(function(a){a.fn.eles({on:a.define.on(),one:a.define.on({unbindSelfOnTrigger:true}),once:a.define.on({unbindAllBindersOnTrigger:true}),off:a.define.off(),trigger:a.define.trigger(),rtrigger:function(b,c){this.cy().notify({type:b,collection:this.filter(function(){return !this.removed()})});this.trigger(b,c);return this}});a.elesfn.bind=a.elesfn.on;a.elesfn.unbind=a.elesfn.off;a.define.event.aliasesOn(a.elesfn)})(cytoscape);(function(a){a.fn.eles({isNode:function(){return this.group()==="nodes"
},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},group:function(){var b=this[0];if(b){return b._private.group}}})})(cytoscape);(function(a){a.fn.eles({each:function(d){if(a.is.fn(d)){for(var c=0;c<this.length;c++){var e=this[c];var b=d.apply(e,[c,e]);if(b===false){break}}}return this},toArray:function(){var c=[];for(var b=0;b<this.length;b++){c.push(this[b])}return c},slice:function(f,b){var e=[];var c=this.length;
if(b==null){b=c}if(f<0){f=c+f}for(var d=f;d>=0&&d<b&&d<c;d++){e.push(this[d])}return new a.Collection(this.cy(),e)},size:function(){return this.length},eq:function(b){return this[b]},empty:function(){return this.length===0},nonempty:function(){return !this.empty()}})})(cytoscape);(function(b){function c(d){return function(){var e=arguments;if(e.length===2){var j=e[0];var g=e[1];this.bind(d.event,j,g)}else{if(e.length===1){var g=e[0];this.bind(d.event,g)}else{if(e.length===0){for(var f=0;f<this.length;
f++){var h=this[f];if(!d.ableField||h._private[d.ableField]){h._private[d.field]=d.value}}this.updateStyle();this.trigger(d.event)}}}return this}}function a(d){b.elesfn[d.field]=function(){var e=this[0];if(e){return e._private[d.field]}};b.elesfn[d.on]=c({event:d.on,field:d.field,ableField:d.ableField,value:true});b.elesfn[d.off]=c({event:d.off,field:d.field,ableField:d.ableField,value:false})}a({field:"locked",on:"lock",off:"unlock"});a({field:"grabbable",on:"grabify",off:"ungrabify"});a({field:"selected",ableField:"selectable",on:"select",off:"unselect"});
a({field:"selectable",on:"selectify",off:"unselectify"});b.elesfn.grabbed=function(){var d=this[0];if(d){return d._private.grabbed}}})(cytoscape);(function(b){b.fn.eles({nodes:function(e){return this.filter(function(g,f){return f.isNode()}).filter(e)},edges:function(e){return this.filter(function(g,f){return f.isEdge()}).filter(e)},filter:function(f){var j=this._private.cy;if(b.is.fn(f)){var h=[];for(var e=0;e<this.length;e++){var g=this[e];if(f.apply(g,[e,g])){h.push(g)}}return new b.Collection(j,h)
}else{if(b.is.string(f)||b.is.elementOrCollection(f)){return new b.Selector(f).filter(this)}else{if(f===undefined){return this}}}return new b.Collection(j)},not:function(h){var k=this._private.cy;if(!h){return this}else{if(b.is.string(h)){h=this.filter(h)}var j=[];for(var g=0;g<this.length;g++){var f=this[g];var e=h._private.ids[f.id()];if(!e){j.push(f)}}return new b.Collection(k,j)}},intersect:function(m){var o=this;var i=this._private.cy;if(b.is.string(m)){var j=m;return this.filter(j)}var e=[];
var l=this;var k=m;var n=this.length<m.length;var h=n?l._private.ids:k._private.ids;var g=n?k._private.ids:l._private.ids;for(var f in h){var p=g[f];if(p){e.push(p)}}return new b.Collection(i,e)},add:function(m){var n=this;var g=this._private.cy;if(!m){return this}if(b.is.string(m)){var h=m;m=g.elements(h)}var e=[];var f={};function l(i){if(!i){return}if(!f[i.id()]){e.push(i);f[i.id()]=true}}for(var k=0;k<n.length;k++){var j=n[k];l(j)}for(var k=0;k<m.length;k++){var j=m[k];l(j)}return new b.Collection(g,e)
}});b.fn.eles({neighborhood:function(m){var e=[];var l=this._private.cy;var f=this.nodes();for(var p=0;p<f.length;p++){var k=f[p];var h=k.connectedEdges();for(var o=0;o<h.length;o++){var g=h[o];var n=g.connectedNodes().not(k);if(n.length>0){e.push(n[0])}e.push(g[0])}}return(new b.Collection(l,e)).filter(m)},closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});b.fn.eles({source:d({attr:"source"}),target:d({attr:"target"})});
function d(e){return function(f){var h=[];var g=this.edges();var n=this._private.cy;for(var j=0;j<g.length;j++){var k=g[j];var m=k._private.data[e.attr];var l=n.getElementById(m);if(l.length>0){h.push(l)}}return new b.Collection(n,h).filter(f)}}b.fn.eles({edgesWith:a(),edgesTo:a({thisIs:"source"})});function a(e){return function(r){var f=[];var j=this._private.cy;var g=e||{};if(b.is.string(r)){r=j.$(r)}var l=r.connectedEdges();var s=this._private.ids;for(var m=0;m<l.length;m++){var h=l[m];var n;var o=h._private.data;
if(g.thisIs){var k=o[g.thisIs];n=s[k]}else{n=s[o.source]||s[o.target]}if(n){f.push(h)}}return new b.Collection(j,f)}}b.fn.eles({connectedEdges:function(l){var e=[];var k=this._private.cy;var f=this.nodes();for(var o=0;o<f.length;o++){var h=f[o];var n=h._private.edges;for(var m=0;m<n.length;m++){var g=n[m];e.push(g)}}return new b.Collection(k,e).filter(l)},connectedNodes:function(e){var j=[];var k=this._private.cy;var f=this.edges();for(var g=0;g<f.length;g++){var h=f[g];j.push(h.source()[0]);j.push(h.target()[0])
}return new b.Collection(k,j).filter(e)},parallelEdges:c(),codirectedEdges:c({codirected:true}),parallelIndex:function(){var g=this[0];if(g.isEdge()){var e=g.source()[0];var m=e._private.edges;var l=0;for(var j=0;j<m.length;j++){var h=m[j];var o=h===g;if(o){return l}var n=g._private.data.source===h._private.data.source&&g._private.data.target===h._private.data.target;var f=g._private.data.source===h._private.data.target&&g._private.data.target===h._private.data.source;var k=n||f;if(k){l++}}}},parallelSize:function(){var g=this[0];
if(g.isEdge()){var e=g.source()[0];var m=e._private.edges;var j=0;for(var k=0;k<m.length;k++){var h=m[k];var n=g._private.data.source===h._private.data.source&&g._private.data.target===h._private.data.target;var f=g._private.data.source===h._private.data.target&&g._private.data.target===h._private.data.source;var l=n||f;if(l){j++}}return j}}});function c(f){var e={codirected:false};f=b.util.extend({},e,f);return function(C){var l=this._private.cy;var u=[];var k=this.edges();var v=f;for(var D=0;D<k.length;
D++){var t=k[D];var E=t.source()[0];var r=E.id();var A=t.target()[0];var n=A.id();var z=E._private.edges;for(var B=0;B<z.length;B++){var s=z[B];var g=s._private.data;var m=g.target;var o=g.source;var h=m===n&&o===r;var w=r===m&&n===o;if((v.codirected&&h)||(!v.codirected&&(h||w))){u.push(s)}}}return new b.Collection(l,u).filter(C)}}b.fn.eles({parent:function(e){var f=[];var k=this._private.cy;for(var g=0;g<this.length;g++){var j=this[g];var h=k.getElementById(j._private.data.parent);if(h.size()>0){f.push(h)
}}return new b.Collection(k,f).filter(e)},parents:function(f){var g=[];var e=this.parent();while(e.nonempty()){for(var h=0;h<e.length;h++){var j=e[h];g.push(j)}e=e.parent()}return new b.Collection(this.cy(),g).filter(f)},children:function(e){var g=[];for(var f=0;f<this.length;f++){var h=this[f];g=g.concat(h._private.children)}return new b.Collection(this.cy(),g).filter(e)},siblings:function(e){return this.parent().children().not(this).filter(e)},descendants:function(e){var f=[];function g(h){for(var j=0;
j<h.length;j++){var k=h[j];f.push(k);if(k.children().nonempty()){g(k.children())}}}g(this.children());return new b.Collection(this.cy(),f).filter(e)}})})(cytoscape);(function($$){$$.fn.selector=function(map,options){for(var name in map){var fn=map[name];$$.Selector.prototype[name]=fn}};$$.Selector=function(onlyThisGroup,selector){if(!(this instanceof $$.Selector)){return new $$.Selector(onlyThisGroup,selector)}if(selector===undefined&&onlyThisGroup!==undefined){selector=onlyThisGroup;onlyThisGroup=undefined
}var self=this;self._private={selectorText:null,invalid:true};function newQuery(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}}if(!selector||($$.is.string(selector)&&selector.match(/^\s*$/))){if(onlyThisGroup==null){self.length=0}else{self[0]=newQuery();self[0].group=onlyThisGroup;self.length=1}}else{if($$.is.element(selector)){var collection=new $$.Collection(self.cy(),[selector]);
self[0]=newQuery();self[0].collection=collection;self.length=1}else{if($$.is.collection(selector)){self[0]=newQuery();self[0].collection=selector;self.length=1}else{if($$.is.fn(selector)){self[0]=newQuery();self[0].filter=selector;self.length=1}else{if($$.is.string(selector)){var metaChar="[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]";var variable="(?:[\\w-]|(?:\\\\"+metaChar+"))+";var comparatorOp="=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=";var boolOp="\\?|\\!|\\^";
var string="\"(?:\\\\\"|[^\"])+\"|'(?:\\\\'|[^'])+'";var number=$$.util.regex.number;var value=string+"|"+number;var meta="degree|indegree|outdegree";var separator="\\s*,\\s*";var className=variable;var descendant="\\s+";var child="\\s+>\\s+";var subject="\\$";var id=variable;function cleanMetaChars(str){return str.replace(new RegExp("\\\\("+metaChar+")","g"),"\1")}var ops=comparatorOp.split("|");for(var i=0;i<ops.length;i++){var op=ops[i];comparatorOp+="|@"+op}var currentSubject=null;var exprs={group:{query:true,regex:"(node|edge|\\*)",populate:function(group){this.group=group=="*"?group:group+"s"
}},state:{query:true,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:parent|:child)",populate:function(state){this.colonSelectors.push(state)}},id:{query:true,regex:"\\#("+id+")",populate:function(id){this.ids.push(cleanMetaChars(id))}},className:{query:true,regex:"\\.("+className+")",populate:function(className){this.classes.push(cleanMetaChars(className))}},dataExists:{query:true,regex:"\\[\\s*("+variable+")\\s*\\]",populate:function(variable){this.data.push({field:cleanMetaChars(variable)})
}},dataCompare:{query:true,regex:"\\[\\s*("+variable+")\\s*("+comparatorOp+")\\s*("+value+")\\s*\\]",populate:function(variable,comparatorOp,value){this.data.push({field:cleanMetaChars(variable),operator:comparatorOp,value:value})}},dataBool:{query:true,regex:"\\[\\s*("+boolOp+")\\s*("+variable+")\\s*\\]",populate:function(boolOp,variable){this.data.push({field:cleanMetaChars(variable),operator:boolOp})}},metaCompare:{query:true,regex:"\\{\\s*("+meta+")\\s*("+comparatorOp+")\\s*("+number+")\\s*\\}",populate:function(meta,comparatorOp,number){this.meta.push({field:cleanMetaChars(meta),operator:comparatorOp,value:number})
}},nextQuery:{separator:true,regex:separator,populate:function(){self[++i]=newQuery();currentSubject=null}},child:{separator:true,regex:child,populate:function(){var childQuery=newQuery();childQuery.parent=this;childQuery.subject=currentSubject;self[i]=childQuery}},descendant:{separator:true,regex:descendant,populate:function(){var descendantQuery=newQuery();descendantQuery.ancestor=this;descendantQuery.subject=currentSubject;self[i]=descendantQuery}},subject:{modifier:true,regex:subject,populate:function(){if(currentSubject!=null&&this.subject!=this){$$.util.error("Redefinition of subject in selector `%s`",selector);
return false}currentSubject=this;this.subject=this},}};var j=0;for(var name in exprs){exprs[j]=exprs[name];exprs[j].name=name;j++}exprs.length=j;self._private.selectorText=selector;var remaining=selector;var i=0;function consumeExpr(expectation){var expr;var match;var name;for(var j=0;j<exprs.length;j++){var e=exprs[j];var n=e.name;if($$.is.fn(expectation)&&!expectation(n,e)){continue}var m=remaining.match(new RegExp("^"+e.regex));if(m!=null){match=m;expr=e;name=n;var consumed=m[0];remaining=remaining.substring(consumed.length);
break}}return{expr:expr,match:match,name:name}}function consumeWhitespace(){var match=remaining.match(/^\s+/);if(match){var consumed=match[0];remaining=remaining.substring(consumed.length)}}self[0]=newQuery();consumeWhitespace();for(;;){var check=consumeExpr();if(check.expr==null){$$.util.error("The selector `%s` is invalid",selector);return}else{var args=[];for(var j=1;j<check.match.length;j++){args.push(check.match[j])}var ret=check.expr.populate.apply(self[i],args);if(ret===false){return}}if(remaining.match(/^\s*$/)){break
}}self.length=i+1;for(j=0;j<self.length;j++){var query=self[j];if(query.subject!=null){for(;;){if(query.subject==query){break}if(query.parent!=null){var parent=query.parent;var child=query;child.parent=null;parent.child=child;query=parent}else{if(query.ancestor!=null){var ancestor=query.ancestor;var descendant=query;descendant.ancestor=null;ancestor.descendant=descendant;query=ancestor}else{$.error("When adjusting references for the selector `%s`, neither parent nor ancestor was found");break}}}self[j]=query.subject
}}if(onlyThisGroup!=null){for(var j=0;j<self.length;j++){if(self[j].group!=null&&self[j].group!=onlyThisGroup){$.error("Group `%s` conflicts with implicit group `%s` in selector `%s`",self[j].group,onlyThisGroup,selector);return}self[j].group=onlyThisGroup}}}else{$.error("A selector must be created from a string; found %o",selector);return}}}}}self._private.invalid=false};$$.selfn=$$.Selector.prototype;$$.selfn.size=function(){return this.length};$$.selfn.eq=function(i){return this[i]};$$.selfn.find=function(){};
$$.selfn.filter=function(collection,addLiveFunction){var self=this;var cy=collection.cy();if(self._private.invalid){return new $$.Collection(cy)}var queryMatches=function(query,element){if(query.group!=null&&query.group!="*"&&query.group!=element._private.group){return false}var allColonSelectorsMatch=true;for(var k=0;k<query.colonSelectors.length;k++){var sel=query.colonSelectors[k];var renderer=cy.renderer();switch(sel){case":selected":allColonSelectorsMatch=element.selected();break;case":unselected":allColonSelectorsMatch=!element.selected();
break;case":selectable":allColonSelectorsMatch=element.selectable();break;case":unselectable":allColonSelectorsMatch=!element.selectable();break;case":locked":allColonSelectorsMatch=element.locked();break;case":unlocked":allColonSelectorsMatch=!element.locked();break;case":visible":allColonSelectorsMatch=element.visible();break;case":hidden":allColonSelectorsMatch=!element.visible();break;case":grabbed":allColonSelectorsMatch=element.grabbed();break;case":free":allColonSelectorsMatch=!element.grabbed();
break;case":removed":allColonSelectorsMatch=element.removed();break;case":inside":allColonSelectorsMatch=!element.removed();break;case":grabbable":allColonSelectorsMatch=element.grabbable();break;case":ungrabbable":allColonSelectorsMatch=!element.grabbable();break;case":animated":allColonSelectorsMatch=element.animated();break;case":unanimated":allColonSelectorsMatch=!element.animated();break;case":parent":allColonSelectorsMatch=element.children().nonempty();break;case":child":allColonSelectorsMatch=element.parent().nonempty();
break}if(!allColonSelectorsMatch){break}}if(!allColonSelectorsMatch){return false}var allIdsMatch=true;for(var k=0;k<query.ids.length;k++){var id=query.ids[k];var actualId=element._private.data.id;allIdsMatch=allIdsMatch&&(id==actualId);if(!allIdsMatch){break}}if(!allIdsMatch){return false}var allClassesMatch=true;for(var k=0;k<query.classes.length;k++){var cls=query.classes[k];allClassesMatch=allClassesMatch&&element.hasClass(cls);if(!allClassesMatch){break}}if(!allClassesMatch){return false}function operandsMatch(params){var allDataMatches=true;
for(var k=0;k<query[params.name].length;k++){var data=query[params.name][k];var operator=data.operator;var value=data.value;var field=data.field;var matches;if(operator!=null&&value!=null){var fieldStr=""+params.fieldValue(field);var valStr=""+eval(value);var caseInsensitive=false;if(operator.charAt(0)=="@"){fieldStr=fieldStr.toLowerCase();valStr=valStr.toLowerCase();operator=operator.substring(1);caseInsensitive=true}if(operator=="="){operator="=="}switch(operator){case"*=":matches=fieldStr.search(valStr)>=0;
break;case"$=":matches=new RegExp(valStr+"$").exec(fieldStr)!=null;break;case"^=":matches=new RegExp("^"+valStr).exec(fieldStr)!=null;break;default:if(caseInsensitive){var expr="fieldStr "+operator+" valStr";matches=eval(expr)}else{var expr=params.fieldRef(field)+" "+operator+" "+value;matches=eval(expr)}}}else{if(operator!=null){switch(operator){case"?":matches=params.fieldTruthy(field);break;case"!":matches=!params.fieldTruthy(field);break;case"^":matches=params.fieldUndefined(field);break}}else{matches=!params.fieldUndefined(field)
}}if(!matches){allDataMatches=false;break}}return allDataMatches}var allDataMatches=operandsMatch({name:"data",fieldValue:function(field){return element._private.data[field]},fieldRef:function(field){return"element._private.data."+field},fieldUndefined:function(field){return element._private.data[field]===undefined},fieldTruthy:function(field){if(element._private.data[field]){return true}return false}});if(!allDataMatches){return false}var allMetaMatches=operandsMatch({name:"meta",fieldValue:function(field){return element[field]()
},fieldRef:function(field){return"element."+field+"()"},fieldUndefined:function(field){return element[field]()==undefined},fieldTruthy:function(field){if(element[field]()){return true}return false}});if(!allMetaMatches){return false}if(query.collection!=null){var matchesAny=query.collection._private.ids[element.id()]!=null;if(!matchesAny){return false}}if(query.filter!=null&&element.collection().filter(query.filter).size()==0){return false}function confirmRelations(query,elements){if(query!=null){var matches=false;
elements=elements();for(var i=0;i<elements.size();i++){if(queryMatches(query,elements.eq(i))){matches=true;break}}return matches}else{return true}}if(!confirmRelations(query.parent,function(){return element.parent()})){return false}if(!confirmRelations(query.ancestor,function(){return element.parents()})){return false}if(!confirmRelations(query.child,function(){return element.children()})){return false}if(!confirmRelations(query.descendant,function(){return element.descendants()})){return false}return true
};var selectorFunction=function(i,element){for(var j=0;j<self.length;j++){var query=self[j];if(queryMatches(query,element)){return true}}return false};if(self._private.selectorText==null){selectorFunction=function(){return true}}var filteredCollection=collection.filter(selectorFunction);return filteredCollection};$$.selfn.toString=$$.selfn.selector=function(){var str="";function clean(obj){if($$.is.string(obj)){return obj}return""}function queryToString(query){var str="";var group=clean(query.group);
str+=group.substring(0,group.length-1);for(var j=0;j<query.data.length;j++){var data=query.data[j];str+="["+data.field+clean(data.operator)+clean(data.value)+"]"}for(var j=0;j<query.meta.length;j++){var meta=query.meta[j];str+="{"+meta.field+clean(meta.operator)+clean(meta.value)+"}"}for(var j=0;j<query.colonSelectors.length;j++){var sel=query.colonSelectors[i];str+=sel}for(var j=0;j<query.ids.length;j++){var sel="#"+query.ids[i];str+=sel}for(var j=0;j<query.classes.length;j++){var sel="."+query.classes[i];
str+=sel}if(query.parent!=null){str=queryToString(query.parent)+" > "+str}if(query.ancestor!=null){str=queryToString(query.ancestor)+" "+str}if(query.child!=null){str+=" > "+queryToString(query.child)}if(query.descendant!=null){str+=" "+queryToString(query.descendant)}return str}for(var i=0;i<this.length;i++){var query=this[i];str+=queryToString(query);if(this.length>1&&i<this.length-1){str+=", "}}return str}})(cytoscape);(function(a){function b(c){}b.prototype.notify=function(c){};a("renderer","null",b)
})(cytoscape);(function(aa){var H=function(ak){if(false){console.log(ak)}};var R={minZoom:0.001,maxZoom:1000,maxPan:-1>>>1,minPan:(-(-1>>>1)-1),selectionToPanDelay:500,dragToSelect:true,dragToPan:true,};var L={};var X=[0,0,0,0,0];var g;var f;var p;var ah=false;var w=false;var b=false;var N;var h=[];var W=999;var ae;var K=[];var A=999;var P={};var o={};var aj={};var J={};var t={};var D={};var F={};var i={};var j=false;var I=false;var m;var v=false;var c=[];var l=[];var E;var U;var r=new Array(2);var V=new Array(2);
var B;var k=new Array(2);var O=new Array(2);var n;var G=false;var Q=0;var d=0;var C=undefined;var a=undefined;var ac=false;var T=false;var u=undefined;var ad=undefined;var S=false;var e=false;var ab=false;var s=undefined;var ai=undefined;var ag=0;var Y=undefined;var Z="";function af(an){this.options=$.extend(true,{},R,an);this.cy=an.cy;E=an.cy;this.init();this.nodePairEdgeData={};var ap=5;this.canvases=new Array(ap);this.canvasContexts=new Array(ap);var am=2;this.bufferCanvases=new Array(am);this.bufferCanvasContexts=new Array(am);
this.canvasNeedsRedraw=new Array(ap);this.redrawReason=new Array(ap);var ak=this.options.cy.container();this.container=ak;setInterval(function(){ag++},450);for(var ao=0;ao<ap+am;ao++){var al=document.createElement("canvas");al.width=ak.clientWidth;al.height=ak.clientHeight;al.style.position="absolute";if(ao<ap){al.id="layer"+ao;al.style.zIndex=String(-ao-am);al.style.visibility="hidden";this.canvases[ao]=al;this.canvasContexts[ao]=al.getContext("2d");this.canvasNeedsRedraw[ao]=false;this.redrawReason[ao]=new Array()
}else{al.id="buffer"+(ao-ap);al.style.zIndex=-(ao-ap);this.bufferCanvases[ao-ap]=al;this.bufferCanvasContexts[ao-ap]=al.getContext("2d")}ak.appendChild(al)}this.bufferCanvases[0].style.visibility="visible";this.bufferCanvases[1].style.visibility="hidden";this.canvas=this.bufferCanvases[0];this.context=this.bufferCanvasContexts[0];this.center=[ak.clientWidth/2,ak.clientHeight/2];this.scale=[1,1];this.zoomLevel=0;U=this}af.prototype.notify=function(ak){if(ak.type=="load"){this.load();this.canvasNeedsRedraw[2]=true;
this.redrawReason[2].push("Load");this.canvasNeedsRedraw[4]=true;this.redrawReason[4].push("Load");this.redraw()}else{if(ak.type=="viewport"){if(!G){this.canvasNeedsRedraw[2]=true;this.redrawReason[2].push("Viewport change");this.canvasNeedsRedraw[4]=true;this.redrawReason[4].push("Viewport change");this.redraw()}else{G=false}}else{if(ak.type=="style"){z=true;this.canvasNeedsRedraw[2]=true;this.redrawReason[2].push("Style change");this.canvasNeedsRedraw[4]=true;this.redrawReason[4].push("Style change");
this.redraw()}else{if(ak.type=="add"||ak.type=="remove"){this.canvasNeedsRedraw[4]=true;this.redrawReason[4].push("Elements added/removed");this.redraw()}else{if(ak.type=="draw"){this.canvasNeedsRedraw[2]=true;this.redrawReason[2].push("Draw call");this.canvasNeedsRedraw[4]=true;this.redrawReason[4].push("Draw call");this.redraw()}else{if(ak.type=="position"){this.canvasNeedsRedraw[2]=true;this.redrawReason[2].push("Position call");this.canvasNeedsRedraw[4]=true;this.redrawReason[4].push("Position call");
this.redraw()}else{console.log("event: "+ak.type)}}}}}}};af.prototype.projectMouse=function(an){var ak,ap;var am=0;var al=0;var ao;ao=E.container();while(ao!=null){if(typeof(ao.offsetLeft)=="number"){am+=ao.offsetLeft;al+=ao.offsetTop}ao=ao.parentNode}ak=an.pageX-am;ap=an.pageY-al;ak-=E.pan().x;ap-=E.pan().y;ak/=E.zoom();ap/=E.zoom();return[ak,ap]};af.prototype.findEdgeMetrics=function(ak){this.nodePairEdgeData={};var an,am;for(var al=0;al<ak.length;al++){an=ak[al];am=an._private.data.source<=an._private.data.target?an._private.data.source+an._private.data.target:an._private.data.target+an._private.data.source;
if(this.nodePairEdgeData[am]==undefined){this.nodePairEdgeData[am]=1}else{this.nodePairEdgeData[am]++}an._private.rscratch.nodePairId=am;an._private.rscratch.nodePairEdgeNum=this.nodePairEdgeData[am]}};af.prototype.findEdges=function(ao){var al=E.edges();var an={};var ak=[];for(var am=0;am<ao.length;am++){an[ao[am]._private.data.id]=ao[am]}for(var am=0;am<al.length;am++){if(an[al[am]._private.data.source]||an[al[am]._private.data.target]){ak.push(al[am])}}return ak};af.prototype.checkPointInPolygon=function(ak,ao,am,an){var al=U.expandLines(am,an)
};af.prototype.findEdgeControlPoints=function(aq){var ax={};var au;for(var ar=0;ar<aq.length;ar++){au=aq[ar]._private.data.source>aq[ar]._private.data.target?aq[ar]._private.data.target+aq[ar]._private.data.source:aq[ar]._private.data.source+aq[ar]._private.data.target;if(ax[au]==undefined){ax[au]=[]}ax[au].push(aq[ar])}var al,ap;for(var au in ax){al=E.getElementById(ax[au][0]._private.data.source);ap=E.getElementById(ax[au][0]._private.data.target);var aw=(al._private.position.x+ap._private.position.x)/2;
var av=(al._private.position.y+ap._private.position.y)/2;var am,ak;if(ax[au].length>1){am=ap._private.position.y-al._private.position.y;ak=al._private.position.x-ap._private.position.x;var at=Math.sqrt(am*am+ak*ak);am/=at;ak/=at}var an;for(var ar=0;ar<ax[au].length;ar++){an=ax[au][ar];if(al._private.data.id==ap._private.data.id){var ay=an._private.style["control-point-step-size"].pxValue;an._private.rscratch.isSelfEdge=true;an._private.rscratch.cp2ax=al._private.position.x;an._private.rscratch.cp2ay=al._private.position.y-1.3*ay*(ar/3+1);
an._private.rscratch.cp2cx=al._private.position.x-1.3*ay*(ar/3+1);an._private.rscratch.cp2cy=al._private.position.y;an._private.rscratch.selfEdgeMidX=(an._private.rscratch.cp2ax+an._private.rscratch.cp2cx)/2;an._private.rscratch.selfEdgeMidY=(an._private.rscratch.cp2ay+an._private.rscratch.cp2cy)/2}else{if(ax[au].length%2==1&&ar==Math.floor(ax[au].length/2)){an._private.rscratch.isStraightEdge=true}else{var ay=an._private.style["control-point-step-size"].value;var ao=(0.5-ax[au].length/2+ar)*ay;an._private.rscratch.isBezierEdge=true;
an._private.rscratch.cp2x=aw+am*ao;an._private.rscratch.cp2y=av+ak*ao}}}}return ax};af.prototype.findEdgeControlPoints2=function(al){var ao={};var ak;for(var an=0;an<al.length;an++){if(ao[al[an]._private.data.id]==undefined){ak=al[an].parallelEdges();for(var am=0;am<al.length;am++){ao[al[an]._private.data.id]=true}aa.styfn.calculateControlPoints(ak)}}};af.prototype.checkRecordPinchCoordinates=function(ak){if(ak.touches.length>=2){prevTouch1=ak.touches[0];prevTouch2=ak.touches[1];prevTouch1.offsetX=prevTouch1.clientX+U.canvas.parentElement.offsetLeft;
prevTouch1.offsetY=prevTouch1.clientY+U.canvas.parentElement.offsetTop;prevTouch2.offsetX=prevTouch2.clientX+U.canvas.parentElement.offsetLeft;prevTouch2.offsetY=prevTouch2.clientY+U.canvas.parentElement.offsetTop}else{prevTouch1=undefined;prevTouch2=undefined}};af.prototype.mouseDownHandler=function(ak){var al=E.nodes();var ao=E.edges();var aq=false;var am=ak;if(ak.changedTouches){ak.preventDefault();aq=true;if(ak.touches.length>=2){firstTouchFinger=ak.touches[0];secondTouchFinger=ak.touches[1];
var au=[U.canvas.parentElement.offsetLeft,-U.canvas.parentElement.offsetTop];k[0]=ak.touches[0].clientX+au[0];k[1]=ak.touches[0].clientY+au[1];O[0]=ak.touches[1].clientX+au[0];O[1]=ak.touches[1].clientY+au[1];n=Math.sqrt(Math.pow(O[0]-k[0],2)+Math.pow(O[1]-k[1],2))}ak=ak.changedTouches[0];ak.button=0;ak.touch=1;U.mouseMoveHelper.hoverHandler(al,ao,ak)}var ar=ak;Y=ag;clearTimeout(this.panTimeout);if(!ae&&!aq){this.panTimeout=setTimeout(function(){if(Y!==undefined&&!aq&&ak.button===0){g=ar.clientX;
f=ar.clientY;ah=true;if(E.renderer().canvas.style.cursor!=E.style()._private.coreStyle["panning-cursor"].value){E.renderer().canvas.style.cursor=E.style()._private.coreStyle["panning-cursor"].value}X[4]=0;U.canvasNeedsRedraw[0]=true;U.redrawReason[0].push("selection boxed removed");Y=undefined}},250)}if((!ak.touch&&ar.button==1&&ar.target==E.renderer().canvas)||(ak.touch&&ae==undefined&&N==undefined)){g=ar.clientX;f=ar.clientY;ah=true;if(E.renderer().canvas.style.cursor!=E.style()._private.coreStyle["panning-cursor"].value){E.renderer().canvas.style.cursor=E.style()._private.coreStyle["panning-cursor"].value
}}ac=true;T=true;var an=E.renderer().projectMouse(ak);X[0]=an[0];X[1]=an[1];if(ar.button==0&&ar.target==E.renderer().canvas&&ae==undefined&&N==undefined&&!aq){X[4]=1}if(ar.button==0){if(ae!=undefined&&ae.grabbable()){j=true;c=[];if(ae.selected()){I=true;for(var at=0;at<al.length;at++){if(al[at].selected()&&al[at].grabbable()){al[at]._private.rscratch.dragStartX=al[at]._private.position.x;al[at]._private.rscratch.dragStartY=al[at]._private.position.y;c.push(al[at]);al[at]._private.grabbed=true;al[at].trigger("grab")
}}}else{if(ae.grabbable()){I=false;m=ae;m._private.rscratch.dragStartX=m._private.position.x;m._private.rscratch.dragStartY=m._private.position.y;c.push(m);m._private.rscratch.layer2=true;m._private.grabbed=true;m.trigger("grab")}}l=U.findEdges(c);for(var ap=0;ap<l.length;ap++){}v=false;if(aq){ae.trigger("touchstart")}else{ae.trigger("mousedown")}C=ae}else{if(N!=undefined){if(aq){N.trigger("touchstart")}else{N.trigger("mousedown")}a=N}else{if(aq){E.trigger("touchstart")}else{E.trigger("mousedown")
}ac=true}}}E.renderer().redraw()};af.prototype.mouseOverHandler=function(ak){e=true;S=true};af.prototype.mouseOutHandler=function(ak){ab=false;S=false;E.trigger("mouseout");s=undefined};af.prototype.touchStartHandler=function(ak){};af.prototype.touchStartHandler=function(ak){};af.prototype.documentMouseMoveHandler=function(al){var am=false;var ak=al;if(al.touches){am=true;ak=al.touches[0]}};af.prototype.mouseMoveHandler=function(aC){S=true;Q=setTimeout(function(){Q=null},1000/100);var az=aC;var aq=false;
if(aC.touches){aC.preventDefault();aq=true;if(aC.touches.length>=2){var aA=[U.canvas.parentElement.offsetLeft,-U.canvas.parentElement.offsetTop];r[0]=az.touches[0].clientX+aA[0];r[1]=az.touches[0].clientY+aA[1];V[0]=az.touches[1].clientX+aA[0];V[1]=az.touches[1].clientY+aA[1];B=Math.sqrt(Math.pow(O[0]-k[0],2)+Math.pow(O[1]-k[1],2));var au=[r[0]-k[0],r[1]-k[1]];var at=[V[0]-O[0],V[1]-O[1]];var ak=[(au[0]+at[0])/2,(at[1]+at[1])/2];var ao=B/n;if(ao>1){ao=(ao-1)*1.5+1}else{ao=1-(1-ao)*1.5}G=true;E.panBy({x:ak[0],y:ak[1]});
E.zoom({level:E.zoom()*ao,position:{x:(r[0]+V[0])/2,y:(r[1]+V[1])/2}});k[0]=r[0];k[1]=r[1];O[0]=V[0];O[1]=V[1];n=B;return}aC=aC.touches[0];aC.button=0}var ay=az;var an=U.mouseMoveHelper.dragHandler;var al=U.mouseMoveHelper.hoverHandler;var am=E.edges();var aw=E.nodes();Y=undefined;if(ah){an(aC)}var av=E.renderer().projectMouse(aC);ai=aC.screenX;if(s!==undefined&&Math.abs(s-ai)>1){ab=true}s=ai;X[2]=av[0];X[3]=av[1];if(!X[4]){al(aw,am,aC)}C=undefined;a=undefined;T=false;if(ae!=undefined){if(E.renderer().canvas.style.cursor!=ae._private.style.cursor.value){E.renderer().canvas.style.cursor=ae._private.style.cursor.value
}if(u!==ae){if(u!==undefined){if(aq){}else{u.trigger("mouseout")}}u=ae;var ar=ae.grabbed();if(aq&&!ar){}else{if(!aq&&!ar){ae.trigger("mouseover")}}}else{if(aq){ae.trigger("touchmove")}else{ae.trigger("mousemove")}}}else{if(N!=undefined){if(E.renderer().canvas.style.cursor!=N._private.style.cursor.value){E.renderer().canvas.style.cursor=N._private.style.cursor.value}if(ad!==N){if(ad!==undefined){if(aq){}else{ad.trigger("mouseout")}}ad=N;var ax=N.grabbed();if(aq&&!ax){}else{if(!aq&&!ax){N.trigger("mouseover")
}}}else{if(aq){N.trigger("touchmove")}else{N.trigger("mousemove")}}}else{if(!ae&&!N&&E.renderer().canvas.style.cursor!="default"){E.renderer().canvas.style.cursor="default"}if(ad!==undefined){if(aq){}else{ad.trigger("mouseout")}ad=undefined}if(u!==undefined){if(aq){}else{u.trigger("mouseout")}u=undefined}if(e){if(aq){}else{E.trigger("mouseover")}S=true;e=false}else{if(S){if(aq){E.trigger("touchmove")}else{E.trigger("mousemove")}}}}}if(j){if(!v){for(var aB=0;aB<c.length;aB++){c[aB]._private.rscratch.layer2=true
}for(var aB=0;aB<l.length;aB++){l[aB]._private.rscratch.layer2=true}U.canvasNeedsRedraw[4]=true;U.redrawReason[4].push("nodes being dragged, moved to drag layer");U.canvasNeedsRedraw[2]=true;U.redrawReason[2].push("nodes being dragged, moved to drag layer");v=true}for(var ap=0;ap<aw.length;ap++){if((I&&aw[ap].selected())||(!I&&aw[ap]==m)){if(!aw[ap]._private.locked&&aw[ap]._private.grabbable){aw[ap]._private.position.x=aw[ap]._private.rscratch.dragStartX+(X[2]-X[0]);aw[ap]._private.position.y=aw[ap]._private.rscratch.dragStartY+(X[3]-X[1]);
aw[ap].trigger("drag");aw[ap].trigger("position")}}}U.canvasNeedsRedraw[2]=true;U.redrawReason[2].push("nodes being dragged")}if(X[4]){U.canvasNeedsRedraw[0]=true;U.redrawReason[0].push("selection boxed moved")}if(ah||j||X[4]){E.renderer().redraw()}};af.prototype.mouseUpHandler=function(aA){var av=undefined;if(aA.changedTouches){aA.preventDefault();av=aA;aA=aA.changedTouches[0];aA.button=0;X[2]=U.projectMouse(aA)[0];X[3]=U.projectMouse(aA)[1]}var az=aA;var am=E.edges();var ax=E.nodes();var au=j&&(Math.abs(X[2]-X[0])+Math.abs(X[3]-X[1])>1);
for(var aC=0;aC<c.length;aC++){c[aC]._private.rscratch.layer2=false;c[aC]._private.grabbed=false;c[aC].trigger("free")}c=[];for(var aC=0;aC<l.length;aC++){l[aC]._private.rscratch.layer2=false}var aB=undefined;if(ae!==undefined){aB=ae}else{if(N!==undefined){aB=N}}Y=undefined;var at=undefined;if(av){at="touchend"}else{at="mouseup"}if(aB!=undefined){aB.trigger(at);if(aB===C||aB===a){aB.trigger("click")}}else{E.trigger(at);if(T){E.trigger("click")}}if(!w&&!au){var aq=E.collection();for(var ao=0;ao<ax.length;
ao++){ax[ao]._private.rscratch.selected=false;if(ax[ao]._private.selected){aq=aq.add(ax[ao])}}for(var ao=0;ao<am.length;ao++){am[ao]._private.rscratch.selected=false;if(am[ao]._private.selected){aq=aq.add(am[ao])}}if(aq.length>0){aq.unselect()}}if(X[4]==1&&!j&&Math.abs(X[2]-X[0])+Math.abs(X[3]-X[1])>2){var ar=2;var ak;var aw;var aE=E.collection();for(var ao=0;ao<am.length;ao++){ak=am[ao]._private.selected;var an;var al=am[ao]._private.rscratch;if(am[ao]._private.rscratch.isStraightEdge){an=aa.math.boxInBezierVicinity(X[0],X[1],X[2],X[3],am[ao]._private.rscratch.startX,am[ao]._private.rscratch.startY,(am[ao]._private.rscratch.startX+am[ao]._private.rscratch.endX)/2,(am[ao]._private.rscratch.startY+am[ao]._private.rscratch.endY)/2,am[ao]._private.rscratch.endX,am[ao]._private.rscratch.endY,ar)
}else{if(am[ao]._private.rscratch.isSelfEdge){an=aa.math.boxInBezierVicinity(X[0],X[1],X[2],X[3],am[ao]._private.rscratch.startX,am[ao]._private.rscratch.startY,am[ao]._private.rscratch.cp2ax,am[ao]._private.rscratch.cp2ay,am[ao]._private.rscratch.selfEdgeMidX,am[ao]._private.rscratch.selfEdgeMidY,ar);if(an==0){an=aa.math.boxInBezierVicinity(X[0],X[1],X[2],X[3],am[ao]._private.rscratch.selfEdgeMidX,am[ao]._private.rscratch.selfEdgeMidY,am[ao]._private.rscratch.cp2cx,am[ao]._private.rscratch.cp2cy,am[ao]._private.rscratch.endX,am[ao]._private.rscratch.endY,ar)
}}else{an=aa.math.boxInBezierVicinity(X[0],X[1],X[2],X[3],am[ao]._private.rscratch.startX,am[ao]._private.rscratch.startY,am[ao]._private.rscratch.cp2x,am[ao]._private.rscratch.cp2y,am[ao]._private.rscratch.endX,am[ao]._private.rscratch.endY,ar)}}if(an==2){aw=true}else{if(an==1){if(am[ao]._private.rscratch.isSelfEdge){aw=aa.math.checkBezierCrossesBox(X[0],X[1],X[2],X[3],am[ao]._private.rscratch.startX,am[ao]._private.rscratch.startY,am[ao]._private.rscratch.cp2ax,am[ao]._private.rscratch.cp2ay,am[ao]._private.rscratch.selfEdgeMidX,am[ao]._private.rscratch.selfEdgeMidY,ar);
if(!aw){aw=aa.math.checkBezierCrossesBox(X[0],X[1],X[2],X[3],am[ao]._private.rscratch.selfEdgeMidX,am[ao]._private.rscratch.selfEdgeMidY,am[ao]._private.rscratch.cp2cx,am[ao]._private.rscratch.cp2cy,am[ao]._private.rscratch.endX,am[ao]._private.rscratch.endY,ar)}}else{if(am[ao]._private.rscratch.isStraightEdge){aw=aa.math.checkStraightEdgeCrossesBox(X[0],X[1],X[2],X[3],am[ao]._private.rscratch.startX,am[ao]._private.rscratch.startY,am[ao]._private.rscratch.endX,am[ao]._private.rscratch.endY,ar)}else{aw=aa.math.checkBezierCrossesBox(X[0],X[1],X[2],X[3],am[ao]._private.rscratch.startX,am[ao]._private.rscratch.startY,am[ao]._private.rscratch.cp2x,am[ao]._private.rscratch.cp2y,am[ao]._private.rscratch.endX,am[ao]._private.rscratch.endY,ar)
}}}else{aw=false}}if(aw&&!ak){aE=aE.add(am[ao])}else{if(!aw&&ak){}}}var aI=Math.min(X[0],X[2]);var aH=Math.min(X[1],X[3]);var aG=Math.max(X[0],X[2]);var aF=Math.max(X[1],X[3]);var aD,aw;var ay,ap;for(var ao=0;ao<ax.length;ao++){aD=ax[ao]._private.selected;ay=ax[ao].position();if(ay.x>aI&&ay.x<aG&&ay.y>aH&&ay.y<aF){aw=true;ax[ao]._private.rscratch.selected=true}else{if(t[ax[ao]._private.style.shape.value].intersectBox(aI,aH,aG,aF,ax[ao]._private.style["border-width"].value/2,ax[ao]._private.style.width.value,ax[ao]._private.style.height.value,ay.x,ay.y)){aw=true;
ax[ao]._private.rscratch.selected=true}else{aw=false;ax[ao]._private.rscratch.selected=false}}if(aw&&!aD){aE=aE.add(ax[ao])}else{if(!aw&&aD){}}}if(aE.length>0){aE.select()}}else{if(X[4]==0&&!au){if(ae!=undefined){ae._private.rscratch.hovered=false;ae._private.rscratch.selected=true;if(!ae._private.selected){ae.select()}}else{if(N!=undefined){N._private.rscratch.hovered=false;N._private.rscratch.selected=true;if(!N._private.selected){N.select()}}}}}ah=false;if(E.renderer().canvas.style.cursor!="default"){E.renderer().canvas.style.cursor="default"
}X[4]=0;U.canvasNeedsRedraw[0]=true;U.redrawReason[0].push("Selection box gone");if(au){U.canvasNeedsRedraw[2]=true;U.redrawReason[2].push("Node drag completed");U.canvasNeedsRedraw[4]=true;U.redrawReason[4].push("Node drag completed")}j=false;E.renderer().redraw();if(av&&av.touches.length==1){g=av.touches[0].clientX;f=av.touches[0].clientY;ah=true;if(E.renderer().canvas.style.cursor!=E.style()._private.coreStyle["panning-cursor"].value){E.renderer().canvas.style.cursor=E.style()._private.coreStyle["panning-cursor"].value
}}};af.prototype.windowMouseDownHandler=function(ak){};af.prototype.windowMouseMoveHandler=function(ak){};af.prototype.windowMouseUpHandler=function(ak){};af.prototype.mouseWheelHandler=function(am){if(!ab){return}else{am.preventDefault()}var al=am.wheelDeltaY;E.renderer().zoomLevel-=al/5/500;E.renderer().scale[0]=Math.pow(10,-E.renderer().zoomLevel);E.renderer().scale[1]=Math.pow(10,-E.renderer().zoomLevel);var an=E.renderer().projectMouse(am);var ao=0;if(am.wheelDelta!=undefined){ao=E.zoom()*Math.pow(10,am.wheelDeltaY/500)
}else{ao=E.zoom()*Math.pow(10,am.detail/-4.2)}var ak=U.projectMouse(am);ak[0]*=E.zoom();ak[1]*=E.zoom();ak[0]+=E.pan().x;ak[1]+=E.pan().y;ao=Math.min(ao,100);ao=Math.max(ao,0.01);E.zoom({level:ao,position:{x:ak[0],y:ak[1]}})};af.prototype.keyDownHandler=function(ak){if(ak.keyCode==16&&X[4]!=1){w=true}};af.prototype.keyUpHandler=function(ak){if(ak.keyCode==16){X[4]=0;w=false}};af.prototype.mouseMoveHelper=function(){var ao=function(at){var ar=at.clientX-g;var au=at.clientY-f;E.panBy({x:ar,y:au});g=at.clientX;
f=at.clientY};var an=function(av,at,ax){var au=Math.pow(ax._private.style.width.value/2,2);var aw=false;if(aa.math.inBezierVicinity(av,at,ax._private.rscratch.startX,ax._private.rscratch.startY,ax._private.rscratch.cp2x,ax._private.rscratch.cp2y,ax._private.rscratch.endX,ax._private.rscratch.endY,au)){var ar=aa.math.sqDistanceToQuadraticBezier(av,at,ax._private.rscratch.startX,ax._private.rscratch.startY,ax._private.rscratch.cp2x,ax._private.rscratch.cp2y,ax._private.rscratch.endX,ax._private.rscratch.endY);
if(ar<=au){aw=true;if(ar<W){N=ax;W=ar}}}return aw};var am=function(aw,au,ay){var av=Math.pow(ay._private.style.width.value/2,2);var ax=false;var ar=false;if(aa.math.inBezierVicinity(aw,au,ay._private.rscratch.startX,ay._private.rscratch.startY,ay._private.rscratch.cp2ax,ay._private.rscratch.cp2ay,ay._private.rscratch.selfEdgeMidX,ay._private.rscratch.selfEdgeMidY)){var at=aa.math.sqDistanceToQuadraticBezier(aw,au,ay._private.rscratch.startX,ay._private.rscratch.startY,ay._private.rscratch.cp2ax,ay._private.rscratch.cp2ay,ay._private.rscratch.selfEdgeMidX,ay._private.rscratch.selfEdgeMidY);
if(at<av){ax=true;if(at<W){N=ay;W=at;ar=true}}}if(!ar&&aa.math.inBezierVicinity(aw,au,ay._private.rscratch.selfEdgeMidX,ay._private.rscratch.selfEdgeMidY,ay._private.rscratch.cp2cx,ay._private.rscratch.cp2cy,ay._private.rscratch.endX,ay._private.rscratch.endY)){var at=aa.math.sqDistanceToQuadraticBezier(aw,au,ay._private.rscratch.selfEdgeMidX,ay._private.rscratch.selfEdgeMidY,ay._private.rscratch.cp2cx,ay._private.rscratch.cp2cy,ay._private.rscratch.endX,ay._private.rscratch.endY);if(at<av){ax=true;
if(at<W){N=ay;W=at;ar=true}}}return ax};var aq=function(aA,az,ay,aI,au,aH,ar){var aJ=Math.pow(ay._private.style.width.value/2,2);var av=aA-aI;var at=az-au;var aE=aA-aH;var aD=az-ar;var aG=aH-aI;var aF=ar-au;var aC;var aB=false;if(av*aG+at*aF<=0){aC=(Math.pow(aI-aA,2)+Math.pow(au-az,2))}else{if(aE*aG+aD*aF>=0){aC=(Math.pow(aH-aA,2)+Math.pow(ar-az,2))}else{var ax=aF;var aw=-aG;aC=Math.pow(av*ax+at*aw,2)/(ax*ax+aw*aw)}}if(aC<=aJ){aB=true;if(aC<W){N=ay;W=aC}}return aB};var al=function(au,at,aw){var az=aw._private.style["border-width"].value;
var av=aw._private.style.width.value;var ar=aw._private.style.height.value;var ay=aw._private.position.x;var ax=aw._private.position.y;if(t[aw._private.style.shape.value].checkPointRough(au,at,az,av,ar,ay,ax)){if(t[aw._private.style.shape.value].checkPoint(au,at,az,av/2,ar/2,ay,ax)){return true}}return false};var ap=function(at,ax,ar){var aA=E.renderer().projectMouse(ar);var aw=aA[0];var av=aA[1];if(ae!=undefined){ae=undefined;A=99999}else{if(N!=undefined){N=undefined;W=99999}}var au=[];for(var az=0;
az<at.length;az++){if(al(aw,av,at[az])){au.push(at[az])}}if(au.length>0){au.sort(function(aD,aC){return aC._private.data.id.localeCompare(aD._private.data.id)});au.sort(function(aD,aC){return aC._private.style["z-index"].value-aD._private.style["z-index"].value});ae=au[0];b=true}else{ae=undefined;b=false}var aB=false;var ay=[];for(var az=0;az<ax.length;az++){if(b){break}else{if(ax[az]._private.rscratch.isStraightEdge){aB=aq(aw,av,ax[az],ax[az]._private.rscratch.startX,ax[az]._private.rscratch.startY,ax[az]._private.rscratch.endX,ax[az]._private.rscratch.endY)
}else{if(ax[az]._private.rscratch.isSelfEdge){aB=am(aw,av,ax[az])}else{aB=an(aw,av,ax[az])}}}if(!aB){aB=ak(ax[az],aw,av)}if(aB){ay.push(ax[az])}aB=false}if(ay.length>0){ay.sort(function(aD,aC){return aC._private.data.id.localeCompare(aD._private.data.id)});ay.sort(function(aD,aC){return aC._private.style["z-index"].value-aD._private.style["z-index"].value});N=ay[0]}else{N=undefined}};var ak=function(ax,au,at){var aw=undefined;var az=false;var av=U.getArrowWidth(ax._private.style.width.value);var ar=U.getArrowHeight(ax._private.style.width.value);
var ay=undefined;ay=[-(ax.target().position().x-ax._private.rscratch.arrowEndX),-(ax.target().position().y-ax._private.rscratch.arrowEndY)];aw=az||P[ax._private.style["target-arrow-shape"].value].roughCollide(au,at,ax._private.rscratch.arrowEndX,ax._private.rscratch.arrowEndY,av,ar,ay,0);if(aw){az=az||P[ax._private.style["target-arrow-shape"].value].collide(au,at,ax._private.rscratch.arrowEndX,ax._private.rscratch.arrowEndY,av,ar,ay,0)}ay=[-(ax.source().position().x-ax._private.rscratch.arrowStartX),-(ax.source().position().y-ax._private.rscratch.arrowStartY)];
aw=az||P[ax._private.style["source-arrow-shape"].value].roughCollide(au,at,ax._private.rscratch.arrowStartX,ax._private.rscratch.arrowStartY,av,ar,ay,0);if(aw){az=az||P[ax._private.style["source-arrow-shape"].value].collide(au,at,ax._private.rscratch.arrowStartX,ax._private.rscratch.arrowStartY,av,ar,ay,0)}if(az==true){return true}return false};this.mouseMoveHelper.dragHandler=ao;this.mouseMoveHelper.checkBezierEdgeHover=an;this.mouseMoveHelper.checkStraightEdgeHover=aq;this.mouseMoveHelper.checkNodeHover=al;
this.mouseMoveHelper.checkArrowheadHover=ak;this.mouseMoveHelper.hoverHandler=ap};af.prototype.load=function(){var ak=this;this.mouseMoveHelper();document.addEventListener("keydown",this.keyDownHandler,false);document.addEventListener("keyup",this.keyUpHandler,false);this.bufferCanvases[0].addEventListener("mousedown",this.mouseDownHandler,false);window.addEventListener("mouseup",this.mouseUpHandler,false);window.addEventListener("mousemove",this.mouseMoveHandler,false);this.bufferCanvases[0].addEventListener("mouseout",this.mouseOutHandler,false);
this.bufferCanvases[0].addEventListener("mouseover",this.mouseOverHandler,false);window.addEventListener("mousedown",this.windowMouseDownHandler,false);window.addEventListener("mousemove",this.windowMouseMoveHandler,false);window.addEventListener("mouseup",this.windowMouseUpHandler,false);this.bufferCanvases[0].addEventListener("mousewheel",this.mouseWheelHandler,false);this.bufferCanvases[0].addEventListener("DOMMouseScroll",this.mouseWheelHandler,false);this.bufferCanvases[0].addEventListener("touchstart",this.mouseDownHandler,true);
this.bufferCanvases[0].addEventListener("touchmove",this.mouseMoveHandler,true);this.bufferCanvases[0].addEventListener("touchend",this.mouseUpHandler,true)};af.prototype.init=function(){};af.prototype.complexSqrt=function(ap,al,am){var ao=Math.sqrt(ap*ap+al*al);var ak=Math.sqrt(0.5*(ap+ao));var an=Math.sqrt(0.5*(ao-ap));if(al<-am){an=-an}else{if(al<am){an=0}}return[ak,an]};af.prototype.initStyle=function(){var an=this.options.cy.nodes();var am=this.options.cy.edges();var aq;for(var ao=0;ao<an.length;
ao++){aq=an[ao];aq._private.rscratch.override={};var al=Math.max(Math.random(),0.6);aq._private.rscratch.override.regularColor="rgba("+String(Math.floor(al*100+125))+","+String(Math.floor(al*100+125))+","+String(Math.floor(al*100+125))+","+255+")";aq._private.rscratch.override.regularBorderColor="rgba("+String(Math.floor(al*70+160))+","+String(Math.floor(al*70+160))+","+String(Math.floor(al*70+160))+","+255+")";var ak=Math.random();if(ak<10.35){aq._private.rscratch.override.shape="ellipse"}else{if(ak<0.49){aq._private.rscratch.override.shape="hexagon"
}else{if(ak<0.76){aq._private.rscratch.override.shape="square"}else{if(ak<0.91){aq._private.rscratch.override.shape="pentagon"}else{aq._private.rscratch.override.shape="octogon"}}}}aq._private.rscratch.canvas=document.createElement("canvas")}var ap;for(var ao=0;ao<am.length;ao++){ap=am[ao];ap._private.rscratch.cp2x=Math.random()*this.options.cy.container().width();ap._private.rscratch.cp2y=Math.random()*this.options.cy.container().height();ap._private.rscratch.override={};if(Math.random()<0.45){ap._private.rscratch.override.endShape="inhibitor"
}ap._private.rscratch.override.regularColor=ap.source()[0]._private.rscratch.override.regularBorderColor||defaultNode.regularColor}};af.prototype.findBezierIntersection=function(at,aI){var aG=at.source().position().x;var aE=at.target().position().x;var ap=at.source().position().y;var am=at.target().position().y;var ay;var ar=at._private.rscratch.cp2x;var ao=at._private.rscratch.cp2y;ay=0.5+(0.5-0.5*aI/Math.sqrt(Math.pow(ar-aE,2)+Math.pow(ao-am,2)));var aq=aG-2*ar+aE;var ax=-2*aG+2*ar;var aH=aG;var an=ap-2*ao+am;
var aw=-2*ap+2*ao;var aF=ap;var aM=aq*ay*ay+ax*ay+aH;var aL=an*ay*ay+aw*ay+aF;var al=ar-aG;var av=aG;var ak=ao-ap;var au=ap;var aC=aM-aE;var aK=aE;var aB=aL-am;var aJ=am;var aD;if(Math.abs(al)>0.0001){aD=(ak/al*(aK-av)+au-aJ)/(aB-(ak/al)*aC)}else{aD=(av-aK)/(aC)}var aA=aC*aD+aK;var az=aB*aD+aJ;at._private.rscratch.newCp2x=aA;at._private.rscratch.newCp2y=az;at._private.rscratch.newEndPointX=aM;at._private.rscratch.newEndPointY=aL};af.prototype.findIntersection=function(an,at,al,ar,ao){var am=al-an;
var ak=ar-at;var aq=Math.sqrt(am*am+ak*ak);var ap=aq-ao;if(ap<0){ap=0}return[(ap/aq)*am+an,(ap/aq)*ak+at]};af.prototype.intersectLineEllipse=function(av,au,aq,ap,an,al){var am=aq-av;var ak=ap-au;am/=an;ak/=al;var ar=Math.sqrt(am*am+ak*ak);var ao=ar-1;if(ao<0){return[]}var at=ao/ar;return[(aq-av)*at+av,(ap-au)*at+au]};af.prototype.findCircleNearPoint=function(ao,an,ap,au,at){var al=au-ao;var ak=at-an;var am=Math.sqrt(al*al+ak*ak);var ar=al/am;var aq=ak/am;return[ao+ar*ap,an+aq*ap]};af.prototype.findNewEndPoints=function(al,ak,at,aq,au,ar,ao,am){var an=this.findCircleNearPoint(al,ak,ao,at,aq);
var ap=this.findCircleNearPoint(au,ar,am,at,aq);return[an[0],an[1],ap[0],ap[1]]};af.prototype.calculateNewEndPoints=function(){var al=E.edges();var an,ao;var ak;for(var am=0;am<al.length;am++){an=al[am].source()[0];ao=al[am].target()[0];if(al[am]._private.rscratch.isStraightEdge){continue}ak=this.findNewEndPoints(an.position().x,an.position().y,al[am]._private.rscratch.controlPointX,al[am]._private.rscratch.controlPointY,ao.position().x,ao.position().y);al[am]._private.rscratch.updatedStartX=ak[0];
al[am]._private.rscratch.updatedStartY=ak[1];al[am]._private.rscratch.updatedEndX=ak[2];al[am]._private.rscratch.updatedEndY=ak[3]}};af.prototype.findMaxSqDistanceToOrigin=function(an){var ak=0.000001;var am;for(var al=0;al<an.length/2;al++){am=an[al*2]*an[al*2]+an[al*2+1]*an[al*2+1];if(am>ak){ak=am}}return ak};P.arrow={_points:[-0.15,-0.3,0,0,0.15,-0.3],collide:function(aq,an,am,al,ak,at,ao,ap){var ar=P.arrow._points;return U.pointInsidePolygon(aq,an,ar,am,al,ak,at,ao,ap)},roughCollide:function(al,ar,aq,an,am,ak,ap,ao){if(typeof(P.arrow._farthestPointSqDistance)=="undefined"){P.arrow._farthestPointSqDistance=U.findMaxSqDistanceToOrigin(P.arrow._points)
}return U.checkInBoundingCircle(al,ar,P.arrow._farthestPointSqDistance,0,am,ak,aq,an)},draw:function(al){var am=P.arrow._points;for(var ak=0;ak<am.length/2;ak++){al.lineTo(am[ak*2],am[ak*2+1])}},spacing:function(ak){return 0},gap:function(ak){return ak._private.style.width.value*2}};P.triangle=P.arrow;P.none={collide:function(al,ar,aq,an,am,ak,ap,ao){return false},roughCollide:function(al,ar,aq,an,am,ak,ap,ao){return false},draw:function(ak){},spacing:function(ak){return 0},gap:function(ak){return 0
}};Z="arrow";P.circle={_baseRadius:0.15,collide:function(au,aq,an,am,ak,ax,ar,at){if(ak!=ax){var al=Math.asin(ar[1]/(Math.sqrt(ar[0]*ar[0]+ar[1]*ar[1])));var aw=Math.cos(-al);var ap=Math.sin(-al);var ao=[au*aw-aq*ap,aq*aw+au*ap];var av=(ax+at)/(ak+at);aq/=av;am/=av;return(Math.pow(an-au,2)+Math.pow(am-aq,2)<=Math.pow((ak+at)*P.circle._baseRadius,2))}else{return(Math.pow(an-au,2)+Math.pow(am-aq,2)<=Math.pow((ak+at)*P.circle._baseRadius,2))}},roughCollide:function(al,ar,aq,an,am,ak,ap,ao){return true
},draw:function(ak){ak.arc(0,0,P.circle._baseRadius,0,Math.PI*2,false)},spacing:function(ak){return U.getArrowWidth(ak._private.style.width.value)*P.circle._baseRadius},gap:function(ak){return ak._private.style.width.value*2}};P.inhibitor={_points:[-0.25,0,-0.25,-0.1,0.25,-0.1,0.25,0],collide:function(aq,an,am,al,ak,at,ao,ap){var ar=P.inhibitor._points;return U.pointInsidePolygon(aq,an,ar,am,al,ak,at,ao,ap)},roughCollide:function(al,ar,aq,an,am,ak,ap,ao){if(typeof(P.inhibitor._farthestPointSqDistance)=="undefined"){P.inhibitor._farthestPointSqDistance=U.findMaxSqDistanceToOrigin(P.inhibitor._points)
}return U.checkInBoundingCircle(al,ar,P.inhibitor._farthestPointSqDistance,0,am,ak,aq,an)},draw:function(al){var am=P.inhibitor._points;for(var ak=0;ak<am.length/2;ak++){al.lineTo(am[ak*2],am[ak*2+1])}},spacing:function(ak){return 4},gap:function(ak){return 4}};P.square={_points:[-0.12,0,0.12,0,0.12,-0.24,-0.12,-0.24],collide:function(aq,an,am,al,ak,at,ao,ap){var ar=P.square._points;return U.pointInsidePolygon(aq,an,ar,am,al,ak,at,ao,ap)},roughCollide:function(al,ar,aq,an,am,ak,ap,ao){if(typeof(P.square._farthestPointSqDistance)=="undefined"){P.square._farthestPointSqDistance=U.findMaxSqDistanceToOrigin(P.square._points)
}return U.checkInBoundingCircle(al,ar,P.square._farthestPointSqDistance,0,am,ak,aq,an)},draw:function(al){var am=P.square._points;for(var ak=0;ak<am.length/2;ak++){al.lineTo(am[ak*2],am[ak*2+1])}},spacing:function(ak){return 0},gap:function(ak){return ak._private.style.width.value*2}};P.diamond={_points:[-0.14,-0.14,0,-0.28,0.14,-0.14,0,0],collide:function(aq,an,am,al,ak,at,ao,ap){var ar=P.diamond._points;return U.pointInsidePolygon(aq,an,ar,am,al,ak,at,ao,ap)},roughCollide:function(al,ar,aq,an,am,ak,ap,ao){if(typeof(P.diamond._farthestPointSqDistance)=="undefined"){P.diamond._farthestPointSqDistance=U.findMaxSqDistanceToOrigin(P.diamond._points)
}return U.checkInBoundingCircle(al,ar,P.diamond._farthestPointSqDistance,0,am,ak,aq,an)},draw:function(ak){ak.lineTo(-0.14,-0.14);ak.lineTo(0,-0.28);ak.lineTo(0.14,-0.14);ak.lineTo(0,0)},spacing:function(ak){return 0},gap:function(ak){return ak._private.style.width.value*2}};P.tee=P.inhibitor;af.prototype.getArrowWidth=function(ak){return Math.max(Math.pow(ak*13.37,0.9),29)};af.prototype.getArrowHeight=function(ak){return Math.max(Math.pow(ak*13.37,0.9),29)};af.prototype.drawArrowShape=function(al,ak,ar,ap,am){var aq=Math.asin(am/(Math.sqrt(ap*ap+am*am)));
if(ap<0){aq=aq+Math.PI/2}else{aq=-(Math.PI/2+aq)}var ao=this.context;ao.save();ao.translate(ak,ar);ao.moveTo(0,0);ao.rotate(-aq);var an=U.getArrowWidth(ao.lineWidth);ao.scale(an,an);ao.beginPath();P[al].draw(ao);ao.closePath();ao.fill();ao.restore()};af.prototype.findEndpoints=function(an){var ap;var ak=an.source()[0];var au=an.target()[0];var az=Math.max(an.source()[0]._private.style.width.value,an.source()[0]._private.style.height.value);var ao=Math.max(an.target()[0]._private.style.width.value,an.target()[0]._private.style.height.value);
az=0;ao/=2;var am=[an.source().position().x,an.source().position().y];var aq=[an.target().position().x,an.target().position().y];if(an._private.rscratch.isSelfEdge){var aw=[an._private.rscratch.cp2cx,an._private.rscratch.cp2cy];ap=t[au._private.style.shape.value].intersectLine(au,au._private.style.width.value,au._private.style.height.value,aw[0],aw[1]);var al=this.shortenIntersection(ap,aw,P[an._private.style["target-arrow-shape"].value].spacing(an));var av=this.shortenIntersection(ap,aw,P[an._private.style["target-arrow-shape"].value].gap(an));
an._private.rscratch.endX=av[0];an._private.rscratch.endY=av[1];an._private.rscratch.arrowEndX=al[0];an._private.rscratch.arrowEndY=al[1];var aw=[an._private.rscratch.cp2ax,an._private.rscratch.cp2ay];ap=t[ak._private.style.shape.value].intersectLine(ak,ak._private.style.width.value,ak._private.style.height.value,aw[0],aw[1]);var ar=this.shortenIntersection(ap,aw,P[an._private.style["source-arrow-shape"].value].spacing(an));var at=this.shortenIntersection(ap,aw,P[an._private.style["source-arrow-shape"].value].gap(an));
an._private.rscratch.startX=at[0];an._private.rscratch.startY=at[1];an._private.rscratch.arrowStartX=ar[0];an._private.rscratch.arrowStartY=ar[1]}else{if(an._private.rscratch.isStraightEdge){ap=t[au._private.style.shape.value].intersectLine(au,au._private.style.width.value,au._private.style.height.value,ak.position().x,ak.position().y);if(ap.length==0){an._private.rscratch.noArrowPlacement=true}else{an._private.rscratch.noArrowPlacement=false}var al=this.shortenIntersection(ap,[ak.position().x,ak.position().y],P[an._private.style["target-arrow-shape"].value].spacing(an));
var av=this.shortenIntersection(ap,[ak.position().x,ak.position().y],P[an._private.style["target-arrow-shape"].value].gap(an));an._private.rscratch.endX=av[0];an._private.rscratch.endY=av[1];an._private.rscratch.arrowEndX=al[0];an._private.rscratch.arrowEndY=al[1];ap=t[ak._private.style.shape.value].intersectLine(ak,ak._private.style.width.value,ak._private.style.height.value,au.position().x,au.position().y);if(ap.length==0){an._private.rscratch.noArrowPlacement=true}else{an._private.rscratch.noArrowPlacement=false
}var ar=this.shortenIntersection(ap,[au.position().x,au.position().y],P[an._private.style["source-arrow-shape"].value].spacing(an));var at=this.shortenIntersection(ap,[au.position().x,au.position().y],P[an._private.style["source-arrow-shape"].value].gap(an));an._private.rscratch.startX=at[0];an._private.rscratch.startY=at[1];an._private.rscratch.arrowStartX=ar[0];an._private.rscratch.arrowStartY=ar[1]}else{if(an._private.rscratch.isBezierEdge){var aw=[an._private.rscratch.cp2x,an._private.rscratch.cp2y];
var ay=am[0]*0.25+aq[0]*0.25+aw[0]*0.5;var ax=am[1]*0.25+aq[1]*0.25+aw[1]*0.5;ap=t[au._private.style.shape.value].intersectLine(au,au._private.style.width.value,au._private.style.height.value,aw[0],aw[1]);var al=this.shortenIntersection(ap,aw,P[an._private.style["target-arrow-shape"].value].spacing(an));var av=this.shortenIntersection(ap,aw,P[an._private.style["target-arrow-shape"].value].gap(an));an._private.rscratch.endX=av[0];an._private.rscratch.endY=av[1];an._private.rscratch.arrowEndX=al[0];
an._private.rscratch.arrowEndY=al[1];ap=t[ak._private.style.shape.value].intersectLine(ak,ak._private.style.width.value,ak._private.style.height.value,aw[0],aw[1]);var ar=this.shortenIntersection(ap,aw,P[an._private.style["source-arrow-shape"].value].spacing(an));var at=this.shortenIntersection(ap,aw,P[an._private.style["source-arrow-shape"].value].gap(an));an._private.rscratch.startX=at[0];an._private.rscratch.startY=at[1];an._private.rscratch.arrowStartX=ar[0];an._private.rscratch.arrowStartY=ar[1]
}else{if(an._private.rscratch.isArcEdge){return}}}}};af.prototype.drawArrowhead=function(an){var am=an._private.rscratch.override.endShape;am=am?am:defaultEdge.endShape;var al=an.target().position().x-an._private.rscratch.newEndPointX;var ak=an.target().position().y-an._private.rscratch.newEndPointY;this.drawArrowShape(an,an._private.rscratch.newEndPointX,an._private.rscratch.newEndPointY,al,ak)};af.prototype.drawArrowheads=function(aq){var an,am;var al=aq._private.rscratch.arrowStartX;var ak=aq._private.rscratch.arrowStartY;
an=al-aq.source().position().x;am=ak-aq.source().position().y;this.context.fillStyle="rgba("+aq._private.style["source-arrow-color"].value[0]+","+aq._private.style["source-arrow-color"].value[1]+","+aq._private.style["source-arrow-color"].value[2]+","+aq._private.style.opacity.value+")";this.context.lineWidth=aq._private.style.width.value;this.drawArrowShape(aq._private.style["source-arrow-shape"].value,al,ak,an,am);var ap=aq._private.rscratch.arrowEndX;var ao=aq._private.rscratch.arrowEndY;an=ap-aq.target().position().x;
am=ao-aq.target().position().y;this.context.fillStyle="rgba("+aq._private.style["target-arrow-color"].value[0]+","+aq._private.style["target-arrow-color"].value[1]+","+aq._private.style["target-arrow-color"].value[2]+","+aq._private.style.opacity.value+")";this.context.lineWidth=aq._private.style.width.value;this.drawArrowShape(aq._private.style["target-arrow-shape"].value,ap,ao,an,am)};af.prototype.drawStraightArrowhead=function(am){var al=am.target().position().x-am._private.rscratch.newStraightEndX;
var ak=am.target().position().y-am._private.rscratch.newStraightEndY;this.drawArrowShape(am,am._private.rscratch.newStraightEndX,am._private.rscratch.newStraightEndY,al,ak)};af.prototype.calculateEdgeMetrics=function(an){if(an._private.data.source==an._private.data.target){an._private.rscratch.selfEdge=true;return}var ao=an._private.data.source<an._private.data.target?an.source()[0]:an.target()[0];var at=an._private.data.target<an._private.data.source?an.source()[0]:an.target()[0];var av=0.5*(ao._private.position.x+at._private.position.x);
var au=0.5*(ao._private.position.y+at._private.position.y);if(this.nodePairEdgeData[an._private.rscratch.nodePairId]==1){an._private.rscratch.straightEdge=true;an._private.rscratch.cp2x=av;an._private.rscratch.cp2y=au;return}var al=an._private.rscratch.nodePairEdgeNum-1;var ap=this.nodePairEdgeData[an._private.rscratch.nodePairId]-1;var aw=(al/ap-0.5);if(Math.abs(aw)<0.0001){an._private.rscratch.straightEdge=true;an._private.rscratch.cp2x=av;an._private.rscratch.cp2y=au;return}var am=at._private.position.x-ao._private.position.x;
var ak=at._private.position.y-ao._private.position.y;var ar=ak*aw;var aq=-am*aw;an._private.rscratch.cp2x=av+ar;an._private.rscratch.cp2y=au+aq};var M=function(ap,al){var ak=1/ap*2*Math.PI;var an=ap%2==0?Math.PI/2+ak/2:Math.PI/2;an+=al;var ao=new Array(ap*2);var aq;for(var am=0;am<ap;am++){aq=am*ak+an;ao[2*am]=Math.cos(aq);ao[2*am+1]=Math.sin(-aq)}return ao};af.prototype.findPolygonIntersection=function(ao,an,al,ak,aq,am){var ap=U.polygonIntersectLine(ak,aq,am,ao._private.position.x,ao._private.position.y,an/2,al/2,ao._private.style["border-width"].value/2);
return U.findNearestIntersection(ap,ak,aq)};af.prototype.expandPolygon=function(ax,am){var an=new Array(ax.length*2);var aw,av,au,at;for(var aq=0;aq<ax.length/2;aq++){aw=ax[aq*2];av=ax[aq*2+1];if(aq<ax.length/2-1){au=ax[(aq+1)*2];at=ax[(aq+1)*2+1]}else{au=ax[0];at=ax[1]}var ar=(at-av);var ap=-(au-aw);var ao=Math.sqrt(ar*ar+ap*ap);var al=ar/ao;var ak=ap/ao;an[aq*4]=aw+al*am;an[aq*4+1]=av+ak*am;an[aq*4+2]=au+al*am;an[aq*4+3]=at+ak*am}return an};af.prototype.joinLines=function(au){var at=new Array(au.length/2);
var aw,av,ar,aq;var ao,an,am,al;for(var ap=0;ap<au.length/4;ap++){aw=au[ap*4];av=au[ap*4+1];ar=au[ap*4+2];aq=au[ap*4+3];if(ap<au.length/4-1){ao=au[(ap+1)*4];an=au[(ap+1)*4+1];am=au[(ap+1)*4+2];al=au[(ap+1)*4+3]}else{ao=au[0];an=au[1];am=au[2];al=au[3]}var ak=this.finiteLinesIntersect(aw,av,ar,aq,ao,an,am,al,true);at[ap*2]=ak[0];at[ap*2+1]=ak[1]}return at};D.ellipse=function(an,am,ak){var al=U.context;al.beginPath();al.save();al.translate(an._private.position.x,an._private.position.y);al.scale(am/2,ak/2);
al.arc(0,0,1,0,Math.PI*2,false);al.closePath();al.restore();al.fill()};F.ellipse=function(ao,an,am,al,ap){var ak=U.intersectLineEllipse(al,ap,ao.position().x,ao.position().y,an/2+ao._private.style["border-width"].value/2,am/2+ao._private.style["border-width"].value/2);return ak};af.prototype.checkInBoundingCircle=function(al,ar,am,aq,an,ak,ap,ao){al=(al-ap)/(an+aq);ar=(ar-ao)/(ak+aq);return(al*al+ar*ar)<=am};af.prototype.checkInBoundingBox=function(ao,aw,am,am,ax,av,an,ay,at,ar){var aq=ax[0],ap=ax[1];
var al=ax[2],ak=ax[3];for(var au=1;au<ax.length/2;au++){if(ax[au*2]<aq){aq=ax[au*2]}else{if(ax[au*2]>al){al=ax[au*2]}}if(ax[au*2+1]<ap){ap=ax[au*2+1]}else{if(ax[au*2+1]>ak){ak=ax[au*2+1]}}}x-=at;y-=ar;x/=an;y/=ay};af.prototype.checkInBoundingBox=function(av,at,aw,au,am,ax,aq,ap){var ao=aw[0],an=aw[1];var al=aw[0],ak=aw[1];for(var ar=1;ar<aw.length/2;ar++){if(aw[ar*2]<ao){ao=aw[ar*2]}else{if(aw[ar*2]>al){al=aw[ar*2]}}if(aw[ar*2+1]<an){an=aw[ar*2+1]}else{if(aw[ar*2+1]>ak){ak=aw[ar*2+1]}}}av-=aq;at-=ap;
av/=am;at/=ax;if(av<ao){return false}else{if(av>al){return false}}if(at<an){return false}else{if(at>ak){return false}}return true};t.ellipse={draw:function(an,am,ak){var al=U.context;al.beginPath();al.save();al.translate(an._private.position.x,an._private.position.y);al.scale(am/2,ak/2);al.arc(0,0,1,0,Math.PI*2,false);al.closePath();al.restore();al.fill()},intersectLine:function(ao,an,am,al,ap){var ak=U.intersectLineEllipse(al,ap,ao.position().x,ao.position().y,an/2+ao._private.style["border-width"].value/2,am/2+ao._private.style["border-width"].value/2);
return ak},intersectBox:function(am,ar,ak,ap,aq,al,at,ao,an){return U.boxIntersectEllipse(am,ar,ak,ap,aq,al,at,ao,an)},checkPointRough:function(al,aq,ap,am,ak,ao,an){return true},checkPoint:function(al,aq,ap,am,ak,ao,an){al-=ao;aq-=an;al/=(am+ap);aq/=(ak+ap);return(Math.pow(al,2)+Math.pow(aq,2)<=1)}};t.triangle={points:M(3,0),draw:function(am,al,ak){U.drawPolygon(am._private.position.x,am._private.position.y,al,ak,t.triangle.points)},intersectLine:function(an,am,al,ak,ao){return U.findPolygonIntersection(an,am,al,ak,ao,t.triangle.points)
},intersectBox:function(am,ar,ak,ap,al,au,ao,an,aq){var at=t.triangle.points;return U.boxIntersectPolygon(am,ar,ak,ap,at,al,au,ao,an,[0,-1],aq)},checkPointRough:function(al,aq,ap,am,ak,ao,an){return U.checkInBoundingBox(al,aq,t.triangle.points,ap,am,ak,ao,an)},checkPoint:function(al,aq,ap,am,ak,ao,an){return U.pointInsidePolygon(al,aq,t.triangle.points,ao,an,am,ak,[0,-1],ap)}};t.square={points:M(4,0),draw:function(am,al,ak){U.drawPolygon(am._private.position.x,am._private.position.y,al,ak,t.square.points)
},intersectLine:function(an,am,al,ak,ao){return U.findPolygonIntersection(an,am,al,ak,ao,t.square.points)},intersectBox:function(am,ar,ak,ap,al,au,ao,an,aq){var at=t.square.points;return U.boxIntersectPolygon(am,ar,ak,ap,at,al,au,ao,an,[0,-1],aq)},checkPointRough:function(al,aq,ap,am,ak,ao,an){return U.checkInBoundingBox(al,aq,t.square.points,ap,am,ak,ao,an)},checkPoint:function(al,aq,ap,am,ak,ao,an){return U.pointInsidePolygon(al,aq,t.square.points,ao,an,am,ak,[0,-1],ap)}};t.rectangle=t.square;t.roundrectangle=t.square;
t.pentagon={points:M(5,0),draw:function(am,al,ak){U.drawPolygon(am._private.position.x,am._private.position.y,al,ak,t.pentagon.points)},intersectLine:function(an,am,al,ak,ao){return U.findPolygonIntersection(an,am,al,ak,ao,t.pentagon.points)},intersectBox:function(am,ar,ak,ap,al,au,ao,an,aq){var at=t.pentagon.points;return U.boxIntersectPolygon(am,ar,ak,ap,at,al,au,ao,an,[0,-1],aq)},checkPointRough:function(al,aq,ap,am,ak,ao,an){return U.checkInBoundingBox(al,aq,t.pentagon.points,ap,am,ak,ao,an)},checkPoint:function(al,aq,ap,am,ak,ao,an){return U.pointInsidePolygon(al,aq,t.pentagon.points,ao,an,am,ak,[0,-1],ap)
}};t.hexagon={points:M(6,0),draw:function(am,al,ak){U.drawPolygon(am._private.position.x,am._private.position.y,al,ak,t.hexagon.points)},intersectLine:function(an,am,al,ak,ao){return U.findPolygonIntersection(an,am,al,ak,ao,t.hexagon.points)},checkPointRough:function(al,aq,ap,am,ak,ao,an){return U.checkInBoundingBox(al,aq,t.hexagon.points,ap,am,ak,ao,an)},checkPoint:function(al,aq,ap,am,ak,ao,an){return U.pointInsidePolygon(al,aq,t.hexagon.points,ao,an,am,ak,[0,-1],ap)}};t.heptagon={points:M(7,0),draw:function(am,al,ak){U.drawPolygon(am._private.position.x,am._private.position.y,al,ak,t.heptagon.points)
},intersectLine:function(an,am,al,ak,ao){return U.findPolygonIntersection(an,am,al,ak,ao,t.heptagon.points)},checkPointRough:function(al,aq,ap,am,ak,ao,an){return checkInBoundingBox(al,aq,t.heptagon.points,ap,am,ak,ao,an)},checkPoint:function(al,aq,ap,am,ak,ao,an){return pointInsidePolygon(al,aq,t.heptagon.points,ao,an,am,ak,[0,-1],ap)}};t.octogon={points:M(8,0),draw:function(am,al,ak){U.drawPolygon(am._private.position.x,am._private.position.y,al,ak,t.octagon.points)},intersectLine:function(an,am,al,ak,ao){return U.findPolygonIntersection(an,am,al,ak,ao,t.octagon.points)
}};D.triangle=function(am,al,ak){E.renderer().drawPolygon(am._private.position.x,am._private.position.y,al,ak,"triangle",3)};F.triangle=function(an,am,al,ak,ao){return U.findPolygonIntersection(an,am,al,ak,ao,"triangle",3)};D.square=function(am,al,ak){E.renderer().drawPolygon(am._private.position.x,am._private.position.y,al,ak,"square",4)};F.square=function(an,am,al,ak,ao){return U.findPolygonIntersection(an,am,al,ak,ao,"square",4)};D.rectangle=D.square;F.rectangle=F.square;D.pentagon=function(am,al,ak){E.renderer().drawNgon(am._private.position.x,am._private.position.y,al,ak,"pentagon",5)
};F.pentagon=function(an,am,al,ak,ao){return U.findPolygonIntersection(an,am,al,ak,ao,"pentagon",5)};D.hexagon=function(am,al,ak){E.renderer().drawNgon(am._private.position.x,am._private.position.y,al,ak,"hexagon",6)};F.hexagon=function(an,am,al,ak,ao){return U.findPolygonIntersection(an,am,al,ak,ao,"hexagon",6)};D.heptagon=function(am,al,ak){E.renderer().drawNgon(am._private.position.x,am._private.position.y,al,ak,"heptagon",7)};F.heptagon=function(an,am,al,ak,ao){return U.findPolygonIntersection(an,am,al,ak,ao,"heptagon",7)
};D.octagon=function(am,al,ak){E.renderer().drawNgon(am._private.position.x,am._private.position.y,al,ak,"octagon",8)};F.octagon=function(an,am,al,ak,ao){return U.findPolygonIntersection(an,am,al,ak,ao,"octagon",8)};af.prototype.findNearestIntersection=function(aq,ak,ar){var am;var ap;var an;var al;if(aq.length==0){return[]}for(var ao=0;ao<aq.length/2;ao++){am=Math.pow(ak-aq[ao*2],2)+Math.pow(ar-aq[ao*2+1],2);if(ap==undefined||ap>am){ap=am;an=aq[ao*2];al=aq[ao*2+1]}}return[an,al]};af.prototype.shortenIntersection=function(ap,ao,am){var ak=[ap[0]-ao[0],ap[1]-ao[1]];
var an=Math.sqrt(ak[0]*ak[0]+ak[1]*ak[1]);var al=(an-am)/an;if(al<0){return[]}else{return[ao[0]+al*ak[0],ao[1]+al*ak[1]]}};af.prototype.drawPolygon=function(al,aq,ap,ak,ao){var an=E.renderer().context;an.save();an.translate(al,aq);an.beginPath();an.scale(ap/2,ak/2);an.moveTo(ao[0],ao[1]);for(var am=1;am<ao.length/2;am++){an.lineTo(ao[am*2],ao[am*2+1])}an.closePath();an.fill();an.restore()};af.prototype.pointInsidePolygon=function(aw,au,ap,at,aq,aA,az,aG,ay){var ar=new Array(ap.length);var aF=Math.asin(aG[1]/(Math.sqrt(aG[0]*aG[0]+aG[1]*aG[1])));
if(aG[0]<0){aF=aF+Math.PI/2}else{aF=-aF-Math.PI/2}var am=Math.cos(-aF);var ak=Math.sin(-aF);for(var aC=0;aC<ar.length/2;aC++){ar[aC*2]=aA*(ap[aC*2]*am-ap[aC*2+1]*ak);ar[aC*2+1]=az*(ap[aC*2+1]*am+ap[aC*2]*ak);ar[aC*2]+=at;ar[aC*2+1]+=aq}var aB;if(ay>0){var aH=U.expandPolygon(ar,-ay);aB=U.joinLines(aH)}else{aB=ar}var aE,ao,aD,an;var al;var av=0;var ax=0;for(var aC=0;aC<aB.length/2;aC++){aE=aB[aC*2];ao=aB[aC*2+1];if(aC+1<aB.length/2){aD=aB[(aC+1)*2];an=aB[(aC+1)*2+1]}else{aD=aB[(aC+1-aB.length/2)*2];
an=aB[(aC+1-aB.length/2)*2+1]}if(aE==aw&&aD==aw){}else{if((aE>=aw&&aw>=aD)||(aE<=aw&&aw<=aD)){al=(aw-aE)/(aD-aE)*(an-ao)+ao;if(al>au){av++}if(al<au){ax++}}else{continue}}}if(av%2==0){return false}else{return true}};af.prototype.polygonIntersectLine=function(aq,ap,ak,an,al,au,at,ar){var aC=[];var ao;var am=new Array(ak.length);for(var ay=0;ay<am.length/2;ay++){am[ay*2]=ak[ay*2]*au+an;am[ay*2+1]=ak[ay*2+1]*at+al}var ax;if(ar>0){var aB=U.expandPolygon(am,-ar);ax=U.joinLines(aB)}else{ax=am}var aw,av,aA,az;
for(var ay=0;ay<ax.length/2;ay++){aw=ax[ay*2];av=ax[ay*2+1];if(ay<ax.length/2-1){aA=ax[(ay+1)*2];az=ax[(ay+1)*2+1]}else{aA=ax[0];az=ax[1]}ao=this.finiteLinesIntersect(aq,ap,an,al,aw,av,aA,az);if(ao.length!=0){aC.push(ao[0],ao[1])}}return aC};af.prototype.boxIntersectPolygon=function(aB,ao,az,am,ap,aw,av,at,aq,aD,au){if(az<aB){var aA=aB;aB=az;az=aA}if(am<ao){var an=ao;ao=am;am=an}var ar=new Array(ap.length);var aC=Math.asin(aD[1]/(Math.sqrt(aD[0]*aD[0]+aD[1]*aD[1])));if(aD[0]<0){aC=aC+Math.PI/2}else{aC=-aC-Math.PI/2
}var al=Math.cos(-aC);var ak=Math.sin(-aC);for(var ay=0;ay<ar.length/2;ay++){ar[ay*2]=aw*(ap[ay*2]*al-ap[ay*2+1]*ak);ar[ay*2+1]=av*(ap[ay*2+1]*al+ap[ay*2]*ak);ar[ay*2]+=at;ar[ay*2+1]+=aq}var ax;if(au>0){var aE=U.expandPolygon(ar,-au);ax=U.joinLines(aE)}else{ax=ar}for(var ay=0;ay<ar.length/2;ay++){if(aB<=ar[ay*2]&&ar[ay*2]<=az){if(ao<=ar[ay*2+1]&&ar[ay*2+1]<=am){return true}}}if(U.pointInsidePolygon(aB,ao,ax,0,0,1,1,0,aD)){return true}else{if(U.pointInsidePolygon(aB,am,ax,0,0,1,1,0,aD)){return true
}else{if(U.pointInsidePolygon(az,am,ax,0,0,1,1,0,aD)){return true}else{if(U.pointInsidePolygon(az,ao,ax,0,0,1,1,0,aD)){return true}}}}return false};af.prototype.boxIntersectEllipse=function(am,aw,ak,au,av,al,az,aq,ao){if(ak<am){var an=am;am=ak;ak=an}if(au<aw){var ax=aw;aw=au;au=ax}var at=[aq-al/2-av,ao];var ay=[aq+al/2+av,ao];var ap=[aq,ao+az/2+av];var ar=[aq,ao-az/2-av];if(ak<at[0]){return false}if(am>ay[0]){return false}if(au<ar[1]){return false}if(aw>ap[1]){return false}if(am<=at[0]&&at[0]<=ak&&aw<=at[1]&&at[1]<=au){return true
}if(am<=ay[0]&&ay[0]<=ak&&aw<=ay[1]&&ay[1]<=au){return true}if(am<=ap[0]&&ap[0]<=ak&&aw<=ap[1]&&ap[1]<=au){return true}if(am<=ar[0]&&ar[0]<=ak&&aw<=ar[1]&&ar[1]<=au){return true}am=(am-aq)/(al+av);ak=(ak-aq)/(al+av);aw=(aw-ao)/(az+av);au=(au-ao)/(az+av);if(am*am+aw*aw<=1){return true}if(ak*ak+aw*aw<=1){return true}if(ak*ak+au*au<=1){return true}if(am*am+au*au<=1){return true}return false};af.prototype.finiteLinesIntersect=function(ap,ax,an,av,al,au,ay,ar,aw){var aq=(ay-al)*(ax-au)-(ar-au)*(ap-al);
var at=(an-ap)*(ax-au)-(av-ax)*(ap-al);var ao=(ar-au)*(an-ap)-(ay-al)*(av-ax);if(ao!=0){var am=aq/ao;var ak=at/ao;if(0<=am&&am<=1&&0<=ak&&ak<=1){return[ap+am*(an-ap),ax+am*(av-ax)]}else{if(!aw){return[]}else{return[ap+am*(an-ap),ax+am*(av-ax)]}}}else{if(aq==0||at==0){if([ap,an,ay].sort()[1]==ay){return[ay,ar]}if([ap,an,al].sort()[1]==al){return[al,au]}if([al,ay,an].sort()[1]==an){return[an,av]}return[]}else{return[]}}};af.prototype.drawNgon=function(aq,ap,am,ak,at){var al=E.renderer().context;al.save();
al.translate(aq,ap);al.beginPath();var ar=1/am*2*Math.PI;var ao=am%2==0?Math.PI/2+ar/2:Math.PI/2;al.scale(ak/2,at/2);al.moveTo(Math.cos(ao),-Math.sin(ao));for(var an=ao;an<ao+2*Math.PI;an+=ar){al.lineTo(Math.cos(an),-Math.sin(an))}al.closePath();al.fill();al.restore()};af.prototype.matchCanvasSize=function(al){var ao=al.clientWidth;var ak=al.clientHeight;var am;for(var an=0;an<this.canvases.length+this.bufferCanvases.length;an++){if(an<this.canvases.length){am=this.canvases[an]}else{am=this.bufferCanvases[an-this.canvases.length]
}if(am.width!==ao||am.height!==ak){am.width=ao;am.height=ak}}};var z=false;af.prototype.redraw=function(ap){U.matchCanvasSize(U.container);if(d){}d=setTimeout(function(){d=null;if(z&&!ap){U.redraw(true);z=false}},1000/80);var am=this.context;var an=this.canvasContexts;var al=this.options.cy.elements().toArray();var au=[];var ar=[];if(this.canvasNeedsRedraw[2]||this.canvasNeedsRedraw[4]){this.findEdgeControlPoints(this.options.cy.edges());al.sort(function(ax,aw){var av=ax._private.style["z-index"].value-aw._private.style["z-index"].value;
if(av==0){if(ax._private.group=="nodes"&&aw._private.group=="edges"){return 1}else{if(ax._private.group=="edges"&&aw._private.group=="nodes"){return -1}}}return 0})}if(this.canvasNeedsRedraw[2]){am=this.canvasContexts[2];this.context=am;am.setTransform(1,0,0,1,0,0);am.clearRect(0,0,am.canvas.width,am.canvas.height);am.translate(this.cy.pan().x,this.cy.pan().y);am.scale(this.cy.zoom(),this.cy.zoom());var ao;for(var aq=0;aq<al.length;aq++){ao=al[aq];if(ao._private.rscratch.layer2){if(ao._private.group=="nodes"){this.drawNode(ao)
}else{if(ao._private.group=="edges"){this.drawEdge(ao)}}}}for(var aq=0;aq<al.length;aq++){ao=al[aq];if(ao._private.rscratch.layer2){if(ao._private.group=="nodes"){this.drawNodeText(ao)}else{if(ao._private.group=="edges"){this.drawEdgeText(ao)}}}}this.canvasNeedsRedraw[2]=false;this.redrawReason[2]=[]}if(this.canvasNeedsRedraw[4]){am=this.canvasContexts[4];this.context=am;am.setTransform(1,0,0,1,0,0);am.clearRect(0,0,am.canvas.width,am.canvas.height);am.translate(this.cy.pan().x,this.cy.pan().y);am.scale(this.cy.zoom(),this.cy.zoom());
var ao;for(var aq=0;aq<al.length;aq++){ao=al[aq];if(!ao._private.rscratch.layer2){if(ao._private.group=="nodes"){this.drawNode(ao)}else{if(ao._private.group=="edges"){this.drawEdge(ao)}}}}for(var aq=0;aq<al.length;aq++){ao=al[aq];if(!ao._private.rscratch.layer2){if(ao._private.group=="nodes"){this.drawNodeText(ao)}else{if(ao._private.group=="edges"){this.drawEdgeText(ao)}}}}this.canvasNeedsRedraw[4]=false;this.redrawReason[4]=[]}if(this.canvasNeedsRedraw[0]){am=this.canvasContexts[0];am.setTransform(1,0,0,1,0,0);
am.clearRect(0,0,am.canvas.width,am.canvas.height);am.translate(this.cy.pan().x,this.cy.pan().y);am.scale(this.cy.zoom(),this.cy.zoom());if(X[4]==1){var at=E.style()._private.coreStyle;var ak=at["selection-box-border-width"].value/this.cy.zoom();am.lineWidth=ak;am.fillStyle="rgba("+at["selection-box-color"].value[0]+","+at["selection-box-color"].value[1]+","+at["selection-box-color"].value[2]+","+at["selection-box-opacity"].value+")";am.fillRect(X[0],X[1],X[2]-X[0],X[3]-X[1]);if(ak>0){am.strokeStyle="rgba("+at["selection-box-border-color"].value[0]+","+at["selection-box-border-color"].value[1]+","+at["selection-box-border-color"].value[2]+","+at["selection-box-opacity"].value+")";
am.strokeRect(X[0],X[1],X[2]-X[0],X[3]-X[1])}}this.canvasNeedsRedraw[0]=false;this.redrawReason[0]=[]}this.bufferCanvasContexts[1].globalCompositeOperation="copy";this.bufferCanvasContexts[1].drawImage(this.canvases[4],0,0);this.bufferCanvasContexts[1].globalCompositeOperation="source-over";this.bufferCanvasContexts[1].drawImage(this.canvases[2],0,0);this.bufferCanvasContexts[1].drawImage(this.canvases[0],0,0);this.bufferCanvasContexts[0].globalCompositeOperation="copy";this.bufferCanvasContexts[0].drawImage(this.bufferCanvases[1],0,0)
};af.prototype.drawEdge=function(ap){var ao=U.context;var an,al;an=ap.source()[0];al=ap.target()[0];if(ap._private.style.visibility.value!="visible"||an._private.style.visibility.value!="visible"||al._private.style.visibility.value!="visible"){return}ao.strokeStyle="rgba("+ap._private.style["line-color"].value[0]+","+ap._private.style["line-color"].value[1]+","+ap._private.style["line-color"].value[2]+","+ap._private.style.opacity.value+")";if(ap._private.style.width.value<=0){return}ao.lineWidth=ap._private.style.width.value;
this.findEndpoints(ap);if(ap._private.rscratch.isSelfEdge){ao.beginPath();ao.moveTo(ap._private.rscratch.startX,ap._private.rscratch.startY);ao.quadraticCurveTo(ap._private.rscratch.cp2ax,ap._private.rscratch.cp2ay,ap._private.rscratch.selfEdgeMidX,ap._private.rscratch.selfEdgeMidY);ao.moveTo(ap._private.rscratch.selfEdgeMidX,ap._private.rscratch.selfEdgeMidY);ao.quadraticCurveTo(ap._private.rscratch.cp2cx,ap._private.rscratch.cp2cy,ap._private.rscratch.endX,ap._private.rscratch.endY);ao.stroke()
}else{if(ap._private.rscratch.isStraightEdge){var am=al._private.position.x-an._private.position.x;var ak=al._private.position.y-an._private.position.y;var ar=ap._private.rscratch.endX-ap._private.rscratch.startX;var aq=ap._private.rscratch.endY-ap._private.rscratch.startY;if(am*ar+ak*aq<0){ap._private.rscratch.straightEdgeTooShort=true}else{ao.beginPath();ao.moveTo(ap._private.rscratch.startX,ap._private.rscratch.startY);ao.lineTo(ap._private.rscratch.endX,ap._private.rscratch.endY);ao.stroke();
ap._private.rscratch.straightEdgeTooShort=false}}else{ao.beginPath();ao.moveTo(ap._private.rscratch.startX,ap._private.rscratch.startY);ao.quadraticCurveTo(ap._private.rscratch.cp2x,ap._private.rscratch.cp2y,ap._private.rscratch.endX,ap._private.rscratch.endY);ao.stroke()}}if(ap._private.rscratch.noArrowPlacement!==true&&ap._private.rscratch.startX!==undefined){this.drawArrowheads(ap)}};af.prototype.drawEdgeText=function(ap){var am=U.context;if(ap._private.style.visibility.value!="visible"){return
}am.textAlign="center";am.textBaseline="middle";var al,ak;var ao,an;if(ap._private.rscratch.isSelfEdge){ao=ap._private.rscratch.selfEdgeMidX;an=ap._private.rscratch.selfEdgeMidY}else{if(ap._private.rscratch.isStraightEdge){ao=(ap._private.rscratch.startX+ap._private.rscratch.endX)/2;an=(ap._private.rscratch.startY+ap._private.rscratch.endY)/2}else{if(ap._private.rscratch.isBezierEdge){ao=Math.pow(1-0.5,2)*ap._private.rscratch.startX+2*(1-0.5)*0.5*ap._private.rscratch.cp2x+(0.5*0.5)*ap._private.rscratch.endX;
an=Math.pow(1-0.5,2)*ap._private.rscratch.startY+2*(1-0.5)*0.5*ap._private.rscratch.cp2y+(0.5*0.5)*ap._private.rscratch.endY}}}al=ao;ak=an;this.drawText(ap,al,ak)};af.prototype.drawNode=function(am){var al=U.context;var ak,an;if(am._private.style.visibility.value!="visible"){return}al.fillStyle="rgba("+am._private.style["background-color"].value[0]+","+am._private.style["background-color"].value[1]+","+am._private.style["background-color"].value[2]+","+(am._private.style["background-opacity"].value*am._private.style.opacity.value)+")";
al.strokeStyle="rgba("+am._private.style["border-color"].value[0]+","+am._private.style["border-color"].value[1]+","+am._private.style["border-color"].value[2]+","+(am._private.style["border-opacity"].value*am._private.style.opacity.value)+")";ak=am._private.style.width.value;an=am._private.style.height.value;t[am._private.style.shape.value].draw(am,ak,an);al.lineWidth=am._private.style["border-width"].value;if(am._private.style["border-width"].value>0){al.stroke()}};af.prototype.drawNodeText=function(aq){var ao=U.context;
if(aq._private.style.visibility.value!="visible"){return}var am,ak;var al=aq._private.style.width.value;var ar=aq._private.style.height.value;var ap=aq._private.style["text-halign"].strValue;if(ap=="left"){ao.textAlign="right";am=aq._private.position.x-al/2}else{if(ap=="right"){ao.textAlign="left";am=aq._private.position.x+al/2}else{if(ap=="center"){ao.textAlign="center";am=aq._private.position.x}else{ao.textAlign="center";am=aq._private.position.x}}}var an=aq._private.style["text-valign"].strValue;
if(an=="top"){ao.textBaseline="bottom";ak=aq._private.position.y-ar/2}else{if(an=="bottom"){ao.textBaseline="top";ak=aq._private.position.y+ar/2}else{if(an=="middle"||an=="center"){ao.textBaseline="middle";ak=aq._private.position.y}else{ao.textBaseline="middle";ak=aq._private.position.y}}}this.drawText(aq,am,ak)};af.prototype.drawText=function(ao,aq,ap){var ak=U.context;var au=ao._private.style["font-style"].strValue;var an=ao._private.style["font-size"].strValue;var aw=ao._private.style["font-family"].strValue;
var at=ao._private.style["font-variant"].strValue;var al=ao._private.style["font-weight"].strValue;ak.font=au+" "+at+" "+al+" "+an+" "+aw;var av=String(ao._private.style.content.value);var am=ao._private.style["text-transform"].value;if(am=="none"){}else{if(am=="uppercase"){av=av.toUpperCase()}else{if(am=="lowercase"){av=av.toLowerCase()}}}ak.fillStyle="rgba("+ao._private.style.color.value[0]+","+ao._private.style.color.value[1]+","+ao._private.style.color.value[2]+","+(ao._private.style["text-opacity"].value*ao._private.style.opacity.value)+")";
ak.strokeStyle="rgba("+ao._private.style["text-outline-color"].value[0]+","+ao._private.style["text-outline-color"].value[1]+","+ao._private.style["text-outline-color"].value[2]+","+(ao._private.style["text-opacity"].value*ao._private.style.opacity.value)+")";if(av!=undefined){ak.fillText(""+av,aq,ap)}var ar=ao._private.style["text-outline-width"].value;if(ar>0){ak.lineWidth=ar;ak.strokeText(av,aq,ap)}};af.prototype.zoom=function(ak){if(ak!=undefined&&ak.level!=undefined){this.scale[0]=ak.level;this.scale[1]=ak.level
}console.log("zoom call");console.log(ak)};af.prototype.fit=function(ak){console.log("fit call");console.log(ak)};af.prototype.pan=function(ak){console.log("pan call");console.log(ak);if(this.context!=undefined){}};af.prototype.panBy=function(ak){this.center[0]-=ak.x;this.center[1]-=ak.y;this.redraw();console.log("panBy call");console.log(ak)};aa("renderer","canvas",af)})(cytoscape);(function(a){var b={ready:function(){},stop:function(){}};function c(d){this.options=a.util.extend(true,{},b,d)}c.prototype.run=function(){var d=this.options;
var e=d.cy;e.nodes().positions(function(){return{x:0,y:0}});e.one("layoutready",d.ready);e.trigger("layoutready");e.one("layoutstop",d.stop);e.trigger("layoutstop")};c.prototype.stop=function(){var d=this.options;cy.one("layoutstop",d.stop);cy.trigger("layoutstop")};a("layout","null",c)})(cytoscape);(function(a){var c={ready:undefined,stop:undefined,fit:true};function b(d){this.options=a.util.extend(true,{},c,d)}b.prototype.run=function(){var h=this.options;var j=h.cy;var g=j.nodes();var f=j.edges();
var e=j.container();var i=e.clientWidth;var d=e.clientHeight;g.positions(function(l,k){if(k.locked()){return false}return{x:Math.round(Math.random()*i),y:Math.round(Math.random()*d)}});j.one("layoutready",h.ready);j.trigger("layoutready");if(h.fit){j.fit()}j.one("layoutstop",h.stop);j.trigger("layoutstop")};b.prototype.stop=function(){};a("layout","random",b)})(cytoscape);(function(a){var c={fit:true,rows:undefined,columns:undefined,ready:undefined,stop:undefined};function b(d){this.options=a.util.extend({},c,d)
}b.prototype.run=function(){var w=options=this.options;var g=w.cy;var t=g.nodes();var f=g.edges();var o=g.container();var s=o.clientWidth;var r=o.clientHeight;if(r==0||s==0){t.positions(function(){return{x:0,y:0}})}else{var h=t.size();var m=Math.sqrt(h*r/s);var l=Math.round(m);var n=Math.round(s/r*m);function k(A){if(A==undefined){return Math.min(l,n)}else{var z=Math.min(l,n);if(z==l){l=A}else{n=A}}}function d(A){if(A==undefined){return Math.max(l,n)}else{var z=Math.max(l,n);if(z==l){l=A}else{n=A
}}}if(options.rows!=null&&options.columns!=null){l=options.rows;n=options.columns}else{if(options.rows!=null&&options.columns==null){l=options.rows;n=Math.ceil(h/l)}else{if(options.rows==null&&options.columns!=null){n=options.columns;l=Math.ceil(h/n)}else{if(n*l>h){var v=k();var p=d();if((v-1)*p>=h){k(v-1)}else{if((p-1)*v>=h){d(p-1)}}}else{while(n*l<h){var v=k();var p=d();if((p+1)*v>=h){d(p+1)}else{k(v+1)}}}}}}var u=s/n;var e=r/l;var j=0;var i=0;t.positions(function(B,A){if(A.locked()){return false
}var z=i*u+u/2;var C=j*e+e/2;i++;if(i>=n){i=0;j++}return{x:z,y:C}})}if(w.fit){g.reset()}g.one("layoutready",w.ready);g.trigger("layoutready");g.one("layoutstop",w.stop);g.trigger("layoutstop")};b.prototype.stop=function(){};a("layout","grid",b)})(cytoscape);(function(a){var c={fit:true,ready:undefined,stop:undefined,positions:undefined,zoom:undefined,pan:undefined};function b(d){this.options=a.util.extend(true,{},c,d)}b.prototype.run=function(){var g=this.options;var i=g.cy;var f=i.nodes();var e=i.edges();
var d=i.container();function h(j){if(g.positions==null){return null}if(g.positions[j._private.data.id]==null){return null}return g.positions[j._private.data.id]}f.positions(function(k,l){var j=h(l);if(l.locked()||j==null){return false}return j});if(g.pan!=null){i.pan(g.pan)}if(g.zoom!=null){i.zoom(g.zoom)}i.one("layoutready",g.ready);i.trigger("layoutready");if(g.fit){i.fit()}i.one("layoutstop",g.stop);i.trigger("layoutstop")};a("layout","preset",b);a("core","presetLayout",function(){var f=this;var d={};
var e={};f.nodes().each(function(g,h){e[h.data("id")]=h.position()});d.positions=e;d.name="preset";d.zoom=f.zoom();d.pan=f.pan();return d})})(cytoscape);(function(a){var b={liveUpdate:true,ready:undefined,stop:undefined,maxSimulationTime:4000,fit:true,padding:[50,50,50,50],ungrabifyWhileSimulating:true,repulsion:undefined,stiffness:undefined,friction:undefined,gravity:true,fps:undefined,precision:undefined,nodeMass:undefined,edgeLength:undefined,stepSize:1,stableEnergy:function(d){var f=d;return(f.max<=0.5)||(f.mean<=0.3)
}};function c(d){this.options=a.util.extend({},b,d)}c.prototype.run=function(){var k=this.options;var j=k.cy;var v=j.nodes();var i=j.edges();var p=j.container();var u=p.clientWidth;var s=p.clientHeight;if(j.nodes().size()<=1){if(k.fit){j.reset()}j.nodes().position({x:Math.round(u/2),y:Math.round(s/2)});j.one("layoutstop",k.stop);j.trigger("layoutstop");j.one("layoutstop",k.stop);j.trigger("layoutstop");return}var m=this.system=arbor.ParticleSystem(k.repulsion,k.stiffness,k.friction,k.gravity,k.fps,k.dt,k.precision);
this.system=m;if(k.liveUpdate&&k.fit){j.reset()}var t=250;var g;var o=false;var f=+new Date;var r={init:function(z){},redraw:function(){var A=m.energy();if(k.stableEnergy!=null&&A!=null&&A.n>0&&k.stableEnergy(A)){m.stop();return}clearTimeout(g);g=setTimeout(w,t);var B=j.collection();m.eachNode(function(H,C){var G=H.name;var E=H.data;var D=E.element;if(D==null){return}var F=D.position();if(!D.locked()&&!D.grabbed()){F.x=C.x;F.y=C.y;B=B.add(D)}});var z=(+new Date-f)>=16;if(k.liveUpdate&&B.size()>0&&z){B.rtrigger("position");
f=+new Date}if(!o){o=true;j.one("layoutready",k.ready);j.trigger("layoutready")}}};m.renderer=r;m.screenSize(u,s);m.screenPadding(k.padding[0],k.padding[1],k.padding[2],k.padding[3]);m.screenStep(k.stepSize);function n(z,A){if(A==null){return undefined}else{if(typeof A==typeof function(){}){return A.apply(z,[z._private.data,{nodes:v.length,edges:i.length,element:z}])}else{return A}}}function d(D){var G=D.x;var E=D.y;var H=u;var B=s;var A=-2;var I=2;var F=-2;var z=2;var C=4;return{x:G/H*C+A,y:E/B*C+I}
}var l=function(A){grabbed=this;var B=m.fromScreen(this.position());var z=arbor.Point(B.x,B.y);this.scratch().arbor.p=z;switch(A.type){case"grab":this.scratch().arbor.fixed=true;break;case"dragstop":this.scratch().arbor.fixed=false;this.scratch().arbor.tempMass=1000;break}};v.bind("grab drag dragstop",l);v.each(function(B,C){var E=this._private.data.id;var A=n(this,k.nodeMass);var z=this._private.locked;var D=d({x:C.position().x,y:C.position().y});this.scratch().arbor=m.addNode(E,{element:this,mass:A,fixed:z,x:z?D.x:undefined,y:z?D.y:undefined})
});i.each(function(){var C=this.id();var A=this.source().id();var B=this.target().id();var z=n(this,k.edgeLength);this.scratch().arbor=m.addEdge(A,B,{length:z})});function h(z){if(k.fit){j.fit()}z()}var e=v.filter(":grabbable");if(k.ungrabifyWhileSimulating){e.ungrabify()}var w=function(){if($.browser.msie){h(function(){z()})}else{z()}function z(){if(!k.liveUpdate){if(k.fit){j.reset()}j.nodes().rtrigger("position")}v.unbind("grab drag dragstop",l);if(k.ungrabifyWhileSimulating){e.grabify()}j.one("layoutstop",k.stop);
j.trigger("layoutstop")}};m.start();setTimeout(function(){m.stop()},k.maxSimulationTime)};c.prototype.stop=function(){if(this.system!=null){system.stop()}};a("layout","arbor",c)})(cytoscape);